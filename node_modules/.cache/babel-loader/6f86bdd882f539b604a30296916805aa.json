{"ast":null,"code":"import _regeneratorRuntime from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _defineProperty from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _classCallCheck from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/teko/work/new_explorer/client/src/components/Lists/Users.js\";\nimport React, { Component } from 'react';\nimport compose from 'recompose/compose';\nimport { connect } from 'react-redux';\nimport { withStyles } from '@material-ui/core/styles';\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Paper from '@material-ui/core/Paper';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport PersonIcon from '@material-ui/icons/Person';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport Avatar from '@material-ui/core/Avatar';\nimport { shape, string } from 'prop-types';\nimport { authSelectors, authOperations } from '../../state/redux/auth';\nimport { userListType, getUserListType } from '../../consts/types';\nimport Container from '../Container';\n\nvar styles = function styles(theme) {\n  var type = theme.palette.type;\n  var dark = type === 'dark';\n  return {\n    paper: {\n      display: 'flex',\n      flexDirection: 'column',\n      alignItems: 'center',\n      padding: \"\".concat(theme.spacing.unit * 2, \"px \").concat(theme.spacing.unit * 3, \"px \").concat(theme.spacing.unit * 3, \"px\")\n    },\n    root: {\n      width: '100%',\n      maxWidth: 360,\n      backgroundColor: theme.palette.background.paper\n    },\n    closeButton: {\n      position: 'absolute',\n      right: theme.spacing.unit,\n      top: theme.spacing.unit,\n      color: theme.palette.grey[500]\n    },\n    adminIcon: {\n      color: dark ? '#1f1a33' : '#004d6b',\n      backgroundColor: dark ? '#6a9cf8' : '#b9d6e1'\n    },\n    userIcon: {\n      color: dark ? '#79536d' : '#407b20',\n      backgroundColor: dark ? '#f7cdea' : '#d0ecda'\n    },\n    deleteButton: {\n      color: '#e33e19'\n    }\n  };\n};\n\nvar userlist = authOperations.userlist,\n    unregister = authOperations.unregister;\nvar userlistSelector = authSelectors.userlistSelector,\n    unregisteredSelector = authSelectors.unregisteredSelector;\nexport var Users = /*#__PURE__*/function (_Component) {\n  _inherits(Users, _Component);\n\n  var _super = _createSuper(Users);\n\n  function Users(props) {\n    var _this;\n\n    _classCallCheck(this, Users);\n\n    _this = _super.call(this, props);\n\n    _this.handleChange = function (event) {\n      var target = event.target;\n      var value = target.type === 'checkbox' ? target.checked : target.value;\n      var name = target.name;\n\n      _this.setState(_defineProperty({}, name, {\n        value: value\n      }));\n    };\n\n    _this.deletePrompt = function (username) {\n      _this.setState({\n        prompt: true\n      });\n\n      _this.setState({\n        selectedUser: username\n      });\n    };\n\n    var registered = props.registered,\n        userlists = props.userlists;\n    _this.state = {\n      rolesList: ['admin', 'user'],\n      error: '',\n      registered: registered,\n      isLoading: false,\n      allValid: false,\n      prompt: false,\n      selectedUser: '',\n      userlists: userlists,\n      info: {\n        status: '',\n        message: ''\n      }\n    };\n    return _this;\n  }\n\n  _createClass(Users, [{\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _nextProps$registered = nextProps.registered,\n          registered = _nextProps$registered === void 0 ? [] : _nextProps$registered,\n          error = nextProps.error,\n          userlists = nextProps.userlists;\n      this.setState(function () {\n        return {\n          registered: registered,\n          error: error,\n          userlists: userlists\n        };\n      });\n    }\n  }, {\n    key: \"reloadUsers\",\n    value: function () {\n      var _reloadUsers = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n        var _this2 = this;\n\n        var userlists, index, newUsers;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                userlists = this.props.userlists;\n                index = userlists.findIndex(function (x) {\n                  return x.username === _this2.state.selectedUser;\n                });\n                newUsers = userlists;\n                newUsers.splice(index, 1);\n                this.setState({\n                  userlists: newUsers\n                });\n\n              case 5:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, this);\n      }));\n\n      function reloadUsers() {\n        return _reloadUsers.apply(this, arguments);\n      }\n\n      return reloadUsers;\n    }()\n  }, {\n    key: \"removeUser\",\n    value: function () {\n      var _removeUser = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n        var _this3 = this;\n\n        var unregisterUser;\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                unregisterUser = this.props.unregister;\n                _context2.next = 3;\n                return Promise.all([unregisterUser({\n                  user: this.state.selectedUser\n                })]).then(function (message) {\n                  if (message[0].status === 'success') {\n                    _this3.reloadUsers();\n                  } else {\n                    _this3.setState({\n                      info: message[0]\n                    });\n                  }\n                });\n\n              case 3:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function removeUser() {\n        return _removeUser.apply(this, arguments);\n      }\n\n      return removeUser;\n    }()\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this4 = this;\n\n      var _this$props = this.props,\n          classes = _this$props.classes,\n          onClose = _this$props.onClose;\n      /* const [open, setOpen] = React.useState(false);\n       */\n\n      var info = this.state.info;\n\n      var handleClose = function handleClose() {\n        _this4.setState({\n          prompt: false,\n          info: {\n            status: '',\n            message: ''\n          }\n        });\n      };\n\n      var handleDelete = function handleDelete() {\n        _this4.setState({\n          info: {\n            status: '',\n            message: ''\n          }\n        });\n\n        _this4.removeUser();\n\n        _this4.setState({\n          selectedUser: ''\n        });\n\n        handleClose();\n      };\n\n      return /*#__PURE__*/React.createElement(Container, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 160,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(Paper, {\n        className: classes.paper,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(MuiDialogTitle, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 6\n        }\n      }, onClose ? /*#__PURE__*/React.createElement(IconButton, {\n        \"aria-label\": \"Close\",\n        className: classes.closeButton,\n        onClick: onClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 167,\n          columnNumber: 8\n        }\n      }, /*#__PURE__*/React.createElement(CloseIcon, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 9\n        }\n      })) : null), /*#__PURE__*/React.createElement(List, {\n        className: classes.root,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 176,\n          columnNumber: 6\n        }\n      }, this.state.userlists.map(function (user) {\n        return /*#__PURE__*/React.createElement(ListItem, {\n          key: user.username,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 8\n          }\n        }, user.roles === 'admin' ? /*#__PURE__*/React.createElement(ListItemAvatar, {\n          className: classes.adminIcon,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 180,\n            columnNumber: 10\n          }\n        }, /*#__PURE__*/React.createElement(Avatar, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 181,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(SupervisorAccountIcon, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 182,\n            columnNumber: 12\n          }\n        }))) : /*#__PURE__*/React.createElement(ListItemAvatar, {\n          className: classes.userIcon,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 186,\n            columnNumber: 10\n          }\n        }, /*#__PURE__*/React.createElement(Avatar, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 187,\n            columnNumber: 11\n          }\n        }, /*#__PURE__*/React.createElement(PersonIcon, {\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 12\n          }\n        }))), user.firstName ? /*#__PURE__*/React.createElement(ListItemText, {\n          primary: user.firstName + ' ' + user.lastName,\n          secondary: user.username,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 193,\n            columnNumber: 10\n          }\n        }) : /*#__PURE__*/React.createElement(ListItemText, {\n          primary: \"No Name Listed\",\n          secondary: user.username,\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 198,\n            columnNumber: 10\n          }\n        }), /*#__PURE__*/React.createElement(IconButton, {\n          className: classes.deleteButton,\n          color: \"primary\",\n          \"aria-label\": \"upload picture\",\n          component: \"span\",\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 9\n          }\n        }, /*#__PURE__*/React.createElement(RemoveIcon, {\n          onClick: function onClick() {\n            return _this4.deletePrompt(user.username);\n          },\n          __self: _this4,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 206,\n            columnNumber: 10\n          }\n        })));\n      })), info.status !== 'success' && /*#__PURE__*/React.createElement(FormHelperText, {\n        id: \"component-error-text\",\n        error: true,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 212,\n          columnNumber: 7\n        }\n      }, info.message), /*#__PURE__*/React.createElement(Dialog, {\n        open: this.state.prompt,\n        keepMounted: true,\n        onClose: handleClose,\n        \"aria-labelledby\": \"alert-dialog-slide-title\",\n        \"aria-describedby\": \"alert-dialog-slide-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(DialogTitle, {\n        id: \"alert-dialog-slide-title\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 223,\n          columnNumber: 7\n        }\n      }, 'Delete a user?'), /*#__PURE__*/React.createElement(DialogContent, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 226,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(DialogContentText, {\n        id: \"alert-dialog-slide-description\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 227,\n          columnNumber: 8\n        }\n      }, \"Are you sure you want to remove this user?\")), /*#__PURE__*/React.createElement(DialogActions, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        onClick: handleClose,\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 232,\n          columnNumber: 8\n        }\n      }, \"Cancel\"), /*#__PURE__*/React.createElement(Button, {\n        onClick: handleDelete,\n        color: \"primary\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 8\n        }\n      }, \"Delete\")))));\n    }\n  }]);\n\n  return Users;\n}(Component);\nUsers.propTypes = {\n  classes: shape({\n    container: string,\n    paper: string\n  }).isRequired\n};\nvar errorSelector = authSelectors.errorSelector;\nUsers.propTypes = {\n  userlists: userListType.isRequired,\n  userlist: getUserListType.isRequired\n};\nexport default compose(withStyles(styles), connect(function (state) {\n  return {\n    error: errorSelector(state),\n    userlists: userlistSelector(state),\n    unregistered: unregisteredSelector(state)\n  };\n}, {\n  userlist: userlist,\n  unregister: unregister\n}))(Users);","map":{"version":3,"sources":["/home/teko/work/new_explorer/client/src/components/Lists/Users.js"],"names":["React","Component","compose","connect","withStyles","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","FormHelperText","Paper","MuiDialogTitle","CloseIcon","IconButton","List","ListItem","ListItemText","ListItemAvatar","SupervisorAccountIcon","PersonIcon","RemoveIcon","Avatar","shape","string","authSelectors","authOperations","userListType","getUserListType","Container","styles","theme","type","palette","dark","paper","display","flexDirection","alignItems","padding","spacing","unit","root","width","maxWidth","backgroundColor","background","closeButton","position","right","top","color","grey","adminIcon","userIcon","deleteButton","userlist","unregister","userlistSelector","unregisteredSelector","Users","props","handleChange","event","target","value","checked","name","setState","deletePrompt","username","prompt","selectedUser","registered","userlists","state","rolesList","error","isLoading","allValid","info","status","message","nextProps","index","findIndex","x","newUsers","splice","unregisterUser","Promise","all","user","then","reloadUsers","classes","onClose","handleClose","handleDelete","removeUser","map","roles","firstName","lastName","propTypes","container","isRequired","errorSelector","unregistered"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport compose from 'recompose/compose';\nimport { connect } from 'react-redux';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Paper from '@material-ui/core/Paper';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport PersonIcon from '@material-ui/icons/Person';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport Avatar from '@material-ui/core/Avatar';\nimport { shape, string } from 'prop-types';\nimport { authSelectors, authOperations } from '../../state/redux/auth';\nimport { userListType, getUserListType } from '../../consts/types';\nimport Container from '../Container';\n\nconst styles = theme => {\n\tconst { type } = theme.palette;\n\tconst dark = type === 'dark';\n\treturn {\n\t\tpaper: {\n\t\t\tdisplay: 'flex',\n\t\t\tflexDirection: 'column',\n\t\t\talignItems: 'center',\n\t\t\tpadding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme\n\t\t\t\t.spacing.unit * 3}px`\n\t\t},\n\t\troot: {\n\t\t\twidth: '100%',\n\t\t\tmaxWidth: 360,\n\t\t\tbackgroundColor: theme.palette.background.paper\n\t\t},\n\t\tcloseButton: {\n\t\t\tposition: 'absolute',\n\t\t\tright: theme.spacing.unit,\n\t\t\ttop: theme.spacing.unit,\n\t\t\tcolor: theme.palette.grey[500]\n\t\t},\n\t\tadminIcon: {\n\t\t\tcolor: dark ? '#1f1a33' : '#004d6b',\n\t\t\tbackgroundColor: dark ? '#6a9cf8' : '#b9d6e1'\n\t\t},\n\t\tuserIcon: {\n\t\t\tcolor: dark ? '#79536d' : '#407b20',\n\t\t\tbackgroundColor: dark ? '#f7cdea' : '#d0ecda'\n\t\t},\n\t\tdeleteButton: {\n\t\t\tcolor: '#e33e19'\n\t\t}\n\t};\n};\nconst { userlist, unregister } = authOperations;\n\nconst { userlistSelector, unregisteredSelector } = authSelectors;\n\nexport class Users extends Component {\n\tstatic propTypes = {\n\t\tclasses: shape({\n\t\t\tcontainer: string,\n\t\t\tpaper: string\n\t\t}).isRequired\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconst { registered, userlists } = props;\n\t\tthis.state = {\n\t\t\trolesList: ['admin', 'user'],\n\t\t\terror: '',\n\t\t\tregistered,\n\t\t\tisLoading: false,\n\t\t\tallValid: false,\n\t\t\tprompt: false,\n\t\t\tselectedUser: '',\n\t\t\tuserlists: userlists,\n\t\t\tinfo: {\n\t\t\t\tstatus: '',\n\t\t\t\tmessage: ''\n\t\t\t}\n\t\t};\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tconst { registered = [], error, userlists } = nextProps;\n\t\tthis.setState(() => ({\n\t\t\tregistered,\n\t\t\terror,\n\t\t\tuserlists\n\t\t}));\n\t}\n\n\thandleChange = event => {\n\t\tconst { target } = event;\n\t\tconst value = target.type === 'checkbox' ? target.checked : target.value;\n\t\tconst { name } = target;\n\t\tthis.setState({\n\t\t\t[name]: { value }\n\t\t});\n\t};\n\tdeletePrompt = username => {\n\t\tthis.setState({ prompt: true });\n\t\tthis.setState({ selectedUser: username });\n\t};\n\tasync reloadUsers() {\n\t\tconst { userlists } = this.props;\n\t\tvar index = userlists.findIndex(x => x.username === this.state.selectedUser);\n\t\tvar newUsers = userlists;\n\t\tnewUsers.splice(index, 1);\n\t\tthis.setState({ userlists: newUsers });\n\t}\n\tasync removeUser() {\n\t\tconst { unregister: unregisterUser } = this.props;\n\t\tawait Promise.all([unregisterUser({ user: this.state.selectedUser })]).then(\n\t\t\tmessage => {\n\t\t\t\tif (message[0].status === 'success') {\n\t\t\t\t\tthis.reloadUsers();\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState({ info: message[0] });\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\trender() {\n\t\tconst { classes, onClose } = this.props;\n\t\t/* const [open, setOpen] = React.useState(false);\n\t\t */\n\t\tconst { info } = this.state;\n\t\tconst handleClose = () => {\n\t\t\tthis.setState({\n\t\t\t\tprompt: false,\n\t\t\t\tinfo: {\n\t\t\t\t\tstatus: '',\n\t\t\t\t\tmessage: ''\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tconst handleDelete = () => {\n\t\t\tthis.setState({ info: { status: '', message: '' } });\n\t\t\tthis.removeUser();\n\t\t\tthis.setState({ selectedUser: '' });\n\n\t\t\thandleClose();\n\t\t};\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t{/* <Typography className={classes.title} component=\"h5\" variant=\"headline\">\n\t\t\t\t\t\tUser List\n\t\t\t\t\t</Typography> */}\n\t\t\t\t\t<MuiDialogTitle>\n\t\t\t\t\t\t{onClose ? (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\t\t\tclassName={classes.closeButton}\n\t\t\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</MuiDialogTitle>\n\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t{this.state.userlists.map(user => (\n\t\t\t\t\t\t\t<ListItem key={user.username}>\n\t\t\t\t\t\t\t\t{user.roles === 'admin' ? (\n\t\t\t\t\t\t\t\t\t<ListItemAvatar className={classes.adminIcon}>\n\t\t\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t\t\t<SupervisorAccountIcon />\n\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ListItemAvatar className={classes.userIcon}>\n\t\t\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t\t\t<PersonIcon />\n\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{user.firstName ? (\n\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\tprimary={user.firstName + ' ' + user.lastName}\n\t\t\t\t\t\t\t\t\t\tsecondary={user.username}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ListItemText primary=\"No Name Listed\" secondary={user.username} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tclassName={classes.deleteButton}\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\taria-label=\"upload picture\"\n\t\t\t\t\t\t\t\t\tcomponent=\"span\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<RemoveIcon onClick={() => this.deletePrompt(user.username)} />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</List>\n\t\t\t\t\t{info.status !== 'success' && (\n\t\t\t\t\t\t<FormHelperText id=\"component-error-text\" error>\n\t\t\t\t\t\t\t{info.message}\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t)}\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\topen={this.state.prompt}\n\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\t\taria-labelledby=\"alert-dialog-slide-title\"\n\t\t\t\t\t\taria-describedby=\"alert-dialog-slide-description\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<DialogTitle id=\"alert-dialog-slide-title\">\n\t\t\t\t\t\t\t{'Delete a user?'}\n\t\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-slide-description\">\n\t\t\t\t\t\t\t\tAre you sure you want to remove this user?\n\t\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t\t</DialogContent>\n\t\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t\t<Button onClick={handleClose} color=\"primary\">\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={handleDelete} color=\"primary\">\n\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</DialogActions>\n\t\t\t\t\t</Dialog>\n\t\t\t\t</Paper>\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nconst { errorSelector } = authSelectors;\nUsers.propTypes = {\n\tuserlists: userListType.isRequired,\n\tuserlist: getUserListType.isRequired\n};\nexport default compose(\n\twithStyles(styles),\n\tconnect(\n\t\tstate => ({\n\t\t\terror: errorSelector(state),\n\t\t\tuserlists: userlistSelector(state),\n\t\t\tunregistered: unregisteredSelector(state)\n\t\t}),\n\t\t{\n\t\t\tuserlist: userlist,\n\t\t\tunregister: unregister\n\t\t}\n\t)\n)(Users);\n"]},"metadata":{},"sourceType":"module"}