{"ast":null,"code":"import _classCallCheck from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _inherits from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/teko/work/new_explorer/client/src/components/Charts/OrgPieChart.js\";\n\n/**\n *    SPDX-License-Identifier: Apache-2.0\n */\nimport React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { PieChart, Pie, Tooltip, Legend } from 'recharts';\nimport { sha256 } from 'js-sha256';\nimport { transactionByOrgType } from '../../consts/types';\n/* istanbul ignore next */\n\nvar styles = function styles(theme) {\n  var type = theme.palette.type;\n  var dark = type === 'dark';\n  return {\n    container: {\n      paddingLeft: '10%',\n      '& .recharts-layer': {\n        fill: dark ? 'rgb(42, 173, 230) !important' : '#5bc5c2 !important'\n      },\n      '& .recharts-scatter-line': {\n        stroke: dark ? '#ffc145 !important' : '#5bc5c2 !important',\n        strokeWidth: '2 !important'\n      },\n      '& .recharts-text': {\n        fill: dark ? '#ffffff !important' : undefined\n      },\n      '& .recharts-cartesian-axis-line': {\n        stroke: dark ? '#ffffff' : undefined\n      }\n    },\n    chart: {\n      top: -30\n    }\n  };\n};\n\nfunction intConversion(str) {\n  var value = 0;\n\n  for (var i = 0; i < str.length; i++) {\n    value = str.charCodeAt(i) + ((value << 5) - value);\n  }\n\n  return value;\n}\n\nfunction getRGBColor(i) {\n  var c = (i & 0x00ffffff).toString(16).toUpperCase();\n  return '#' + '00000'.substring(0, 6 - c.length) + c;\n}\n\nfunction convertSha256(str) {\n  var shaString = sha256(str);\n  return shaString;\n}\n\nexport function getOrgColor(org) {\n  return getRGBColor(intConversion(convertSha256(org)));\n}\nexport var OrgPieChart = /*#__PURE__*/function (_Component) {\n  _inherits(OrgPieChart, _Component);\n\n  var _super = _createSuper(OrgPieChart);\n\n  function OrgPieChart(props) {\n    var _this;\n\n    _classCallCheck(this, OrgPieChart);\n\n    _this = _super.call(this, props);\n\n    _this.orgDataSetup = function (orgData) {\n      var temp = [];\n      orgData.forEach(function (element) {\n        temp.push({\n          value: parseInt(element.count, 10),\n          name: element.creator_msp_id,\n          fill: getOrgColor(element.creator_msp_id)\n        });\n      });\n\n      _this.setState({\n        data: temp\n      });\n    };\n\n    _this.state = {\n      data: [{\n        value: 3,\n        name: 'OrdererMSP',\n        fill: '#0B091A'\n      }, {\n        value: 40,\n        name: 'Org1MSP',\n        fill: '#6283D0'\n      }, {\n        value: 23,\n        name: 'Org2MSP',\n        fill: '#0D3799'\n      }]\n    };\n    return _this;\n  }\n\n  _createClass(OrgPieChart, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var transactionByOrg = this.props.transactionByOrg;\n      this.orgDataSetup(transactionByOrg);\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var transactionByOrg = this.props.transactionByOrg;\n\n      if (nextProps.transactionByOrg !== transactionByOrg) {\n        this.orgDataSetup(nextProps.transactionByOrg);\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var data = this.state.data;\n      var classes = this.props.classes;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classes.container,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 100,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(PieChart, {\n        width: 485,\n        height: 290,\n        className: classes.chart,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(Legend, {\n        align: \"right\",\n        height: 10,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 102,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(Pie, {\n        data: data,\n        dataKey: \"value\",\n        nameKey: \"name\",\n        cx: \"50%\",\n        cy: \"50%\",\n        outerRadius: 90,\n        label: true,\n        fill: \"fill\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 103,\n          columnNumber: 6\n        }\n      }), /*#__PURE__*/React.createElement(Tooltip, {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 6\n        }\n      })));\n    }\n  }]);\n\n  return OrgPieChart;\n}(Component);\nOrgPieChart.propTypes = {\n  transactionByOrg: transactionByOrgType.isRequired\n};\nexport default withStyles(styles)(OrgPieChart);","map":{"version":3,"sources":["/home/teko/work/new_explorer/client/src/components/Charts/OrgPieChart.js"],"names":["React","Component","withStyles","PieChart","Pie","Tooltip","Legend","sha256","transactionByOrgType","styles","theme","type","palette","dark","container","paddingLeft","fill","stroke","strokeWidth","undefined","chart","top","intConversion","str","value","i","length","charCodeAt","getRGBColor","c","toString","toUpperCase","substring","convertSha256","shaString","getOrgColor","org","OrgPieChart","props","orgDataSetup","orgData","temp","forEach","element","push","parseInt","count","name","creator_msp_id","setState","data","state","transactionByOrg","nextProps","classes","propTypes","isRequired"],"mappings":"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","sourcesContent":["/**\n *    SPDX-License-Identifier: Apache-2.0\n */\n\nimport React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport { PieChart, Pie, Tooltip, Legend } from 'recharts';\nimport { sha256 } from 'js-sha256';\nimport { transactionByOrgType } from '../../consts/types';\n\n/* istanbul ignore next */\nconst styles = theme => {\n\tconst { type } = theme.palette;\n\tconst dark = type === 'dark';\n\treturn {\n\t\tcontainer: {\n\t\t\tpaddingLeft: '10%',\n\t\t\t'& .recharts-layer': {\n\t\t\t\tfill: dark ? 'rgb(42, 173, 230) !important' : '#5bc5c2 !important'\n\t\t\t},\n\t\t\t'& .recharts-scatter-line': {\n\t\t\t\tstroke: dark ? '#ffc145 !important' : '#5bc5c2 !important',\n\t\t\t\tstrokeWidth: '2 !important'\n\t\t\t},\n\t\t\t'& .recharts-text': {\n\t\t\t\tfill: dark ? '#ffffff !important' : undefined\n\t\t\t},\n\t\t\t'& .recharts-cartesian-axis-line': {\n\t\t\t\tstroke: dark ? '#ffffff' : undefined\n\t\t\t}\n\t\t},\n\t\tchart: {\n\t\t\ttop: -30\n\t\t}\n\t};\n};\n\nfunction intConversion(str) {\n\tlet value = 0;\n\tfor (let i = 0; i < str.length; i++) {\n\t\tvalue = str.charCodeAt(i) + ((value << 5) - value);\n\t}\n\treturn value;\n}\n\nfunction getRGBColor(i) {\n\tconst c = (i & 0x00ffffff).toString(16).toUpperCase();\n\treturn '#' + '00000'.substring(0, 6 - c.length) + c;\n}\n\nfunction convertSha256(str) {\n\tconst shaString = sha256(str);\n\treturn shaString;\n}\n\nexport function getOrgColor(org) {\n\treturn getRGBColor(intConversion(convertSha256(org)));\n}\n\nexport class OrgPieChart extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdata: [\n\t\t\t\t{ value: 3, name: 'OrdererMSP', fill: '#0B091A' },\n\t\t\t\t{ value: 40, name: 'Org1MSP', fill: '#6283D0' },\n\t\t\t\t{ value: 23, name: 'Org2MSP', fill: '#0D3799' }\n\t\t\t]\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { transactionByOrg } = this.props;\n\t\tthis.orgDataSetup(transactionByOrg);\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tconst { transactionByOrg } = this.props;\n\t\tif (nextProps.transactionByOrg !== transactionByOrg) {\n\t\t\tthis.orgDataSetup(nextProps.transactionByOrg);\n\t\t}\n\t}\n\n\torgDataSetup = orgData => {\n\t\tconst temp = [];\n\t\torgData.forEach(element => {\n\t\t\ttemp.push({\n\t\t\t\tvalue: parseInt(element.count, 10),\n\t\t\t\tname: element.creator_msp_id,\n\t\t\t\tfill: getOrgColor(element.creator_msp_id)\n\t\t\t});\n\t\t});\n\t\tthis.setState({ data: temp });\n\t};\n\n\trender() {\n\t\tconst { data } = this.state;\n\t\tconst { classes } = this.props;\n\t\treturn (\n\t\t\t<div className={classes.container}>\n\t\t\t\t<PieChart width={485} height={290} className={classes.chart}>\n\t\t\t\t\t<Legend align=\"right\" height={10} />\n\t\t\t\t\t<Pie\n\t\t\t\t\t\tdata={data}\n\t\t\t\t\t\tdataKey=\"value\"\n\t\t\t\t\t\tnameKey=\"name\"\n\t\t\t\t\t\tcx=\"50%\"\n\t\t\t\t\t\tcy=\"50%\"\n\t\t\t\t\t\touterRadius={90}\n\t\t\t\t\t\tlabel\n\t\t\t\t\t\tfill=\"fill\"\n\t\t\t\t\t/>\n\t\t\t\t\t<Tooltip />\n\t\t\t\t</PieChart>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nOrgPieChart.propTypes = {\n\ttransactionByOrg: transactionByOrgType.isRequired\n};\n\nexport default withStyles(styles)(OrgPieChart);\n"]},"metadata":{},"sourceType":"module"}