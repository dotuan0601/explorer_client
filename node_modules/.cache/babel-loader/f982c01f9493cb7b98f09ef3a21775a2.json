{"ast":null,"code":"import _defineProperty from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _regeneratorRuntime from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport _classCallCheck from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";\nimport _createClass from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";\nimport _assertThisInitialized from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";\nimport _inherits from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";\nimport _createSuper from \"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";\nvar _jsxFileName = \"/home/teko/work/new_explorer/client/src/components/Lists/Blocks.js\";\n\n/**\n *    SPDX-License-Identifier: Apache-2.0\n */\nimport React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport { Button } from 'reactstrap';\nimport matchSorter from 'match-sorter';\nimport find from 'lodash/find';\nimport moment from 'moment';\nimport { isNull } from 'util';\nimport ReactTable from '../Styled/Table';\nimport BlockView from '../View/BlockView';\nimport TransactionView from '../View/TransactionView';\nimport MultiSelect from '../Styled/MultiSelect';\nimport DatePicker from '../Styled/DatePicker';\nimport { blockListType, currentChannelType, getTransactionType, transactionType } from '../../consts/types';\n/* istanbul ignore next */\n\nvar styles = function styles(theme) {\n  var type = theme.palette.type;\n  var dark = type === 'dark';\n  return {\n    hash: {\n      '&, & li, & ul': {\n        overflow: 'visible !important'\n      }\n    },\n    partialHash: {\n      textAlign: 'center',\n      position: 'relative !important',\n      '&:hover $fullHash': {\n        display: 'block',\n        position: 'absolute !important',\n        padding: '4px 4px',\n        backgroundColor: dark ? '#5e558e' : '#000000',\n        marginTop: -30,\n        marginLeft: -215,\n        borderRadius: 8,\n        color: '#ffffff',\n        opacity: dark ? 1 : undefined\n      },\n      '&:hover $lastFullHash': {\n        display: 'block',\n        position: 'absolute !important',\n        padding: '4px 4px',\n        backgroundColor: dark ? '#5e558e' : '#000000',\n        marginTop: -30,\n        marginLeft: -415,\n        borderRadius: 8,\n        color: '#ffffff',\n        opacity: dark ? 1 : undefined\n      }\n    },\n    fullHash: {\n      display: 'none'\n    },\n    lastFullHash: {\n      display: 'none'\n    },\n    filter: {\n      width: '100%',\n      textAlign: 'center',\n      margin: '0px !important'\n    },\n    filterButton: {\n      opacity: 0.8,\n      margin: 'auto',\n      width: '100% !important',\n      'margin-bottom': '4px'\n    },\n    searchButton: {\n      opacity: 0.8,\n      margin: 'auto',\n      width: '100% !important',\n      backgroundColor: dark ? undefined : '#086108',\n      'margin-bottom': '4px'\n    },\n    filterElement: {\n      textAlign: 'center',\n      display: 'flex',\n      padding: '0px !important',\n      '& > div': {\n        width: '100% !important',\n        marginTop: 20\n      },\n      '& .label': {\n        margin: '25px 10px 0px 10px'\n      }\n    }\n  };\n};\n\nexport var Blocks = /*#__PURE__*/function (_Component) {\n  _inherits(Blocks, _Component);\n\n  var _super = _createSuper(Blocks);\n\n  function Blocks(props) {\n    var _this;\n\n    _classCallCheck(this, Blocks);\n\n    _this = _super.call(this, props);\n\n    _this.searchBlockList = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(channel) {\n        var query, i, channelhash;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                query = \"from=\".concat(new Date(_this.state.from).toString(), \"&&to=\").concat(new Date(_this.state.to).toString());\n\n                for (i = 0; i < _this.state.orgs.length; i++) {\n                  query += \"&&orgs=\".concat(_this.state.orgs[i]);\n                }\n\n                channelhash = _this.props.currentChannel;\n\n                if (channel !== undefined) {\n                  channelhash = channel;\n                }\n\n                _context.next = 6;\n                return _this.props.getBlockListSearch(channelhash, query);\n\n              case 6:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    _this.handleDialogOpen = /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(tid) {\n        var _this$props, getTransaction, currentChannel;\n\n        return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                _this$props = _this.props, getTransaction = _this$props.getTransaction, currentChannel = _this$props.currentChannel;\n                _context2.next = 3;\n                return getTransaction(currentChannel, tid);\n\n              case 3:\n                _this.setState({\n                  dialogOpen: true\n                });\n\n              case 4:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      return function (_x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }();\n\n    _this.handleMultiSelect = function (value) {\n      _this.setState({\n        orgs: value\n      });\n    };\n\n    _this.handleDialogClose = function () {\n      _this.setState({\n        dialogOpen: false\n      });\n    };\n\n    _this.handleSearch = /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n      return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n        while (1) {\n          switch (_context3.prev = _context3.next) {\n            case 0:\n              if (_this.interval !== undefined) {\n                clearInterval(_this.interval);\n              }\n\n              _this.interval = setInterval(function () {\n                _this.searchBlockList();\n              }, 60000);\n              _context3.next = 4;\n              return _this.searchBlockList();\n\n            case 4:\n              _this.setState({\n                search: true\n              });\n\n            case 5:\n            case \"end\":\n              return _context3.stop();\n          }\n        }\n      }, _callee3);\n    }));\n\n    _this.handleClearSearch = function () {\n      if (_this.interval !== undefined) {\n        clearInterval(_this.interval);\n      }\n\n      _this.setState({\n        search: false,\n        to: moment(),\n        orgs: [],\n        err: false,\n        from: moment().subtract(1, 'days')\n      });\n    };\n\n    _this.handleDialogOpenBlockHash = function (blockHash) {\n      var blockList = _this.state.search ? _this.props.blockListSearch : _this.props.blockList;\n      var data = find(blockList, function (item) {\n        return item.blockhash === blockHash;\n      });\n\n      _this.setState({\n        dialogOpenBlockHash: true,\n        blockHash: data\n      });\n    };\n\n    _this.handleDialogCloseBlockHash = function () {\n      _this.setState({\n        dialogOpenBlockHash: false\n      });\n    };\n\n    _this.handleEye = function (row, val) {\n      var selection = _this.state.selection;\n      var data = Object.assign({}, selection, _defineProperty({}, row.index, !val));\n\n      _this.setState({\n        selection: data\n      });\n    };\n\n    _this.reactTableSetup = function (classes) {\n      return [{\n        Header: 'Block Number',\n        accessor: 'blocknum',\n        filterMethod: function filterMethod(filter, rows) {\n          return matchSorter(rows, filter.value, {\n            keys: ['blocknum']\n          }, {\n            threshold: matchSorter.rankings.SIMPLEMATCH\n          });\n        },\n        filterAll: true,\n        width: 150\n      }, {\n        Header: 'Channel Name',\n        accessor: 'channelname',\n        filterMethod: function filterMethod(filter, rows) {\n          return matchSorter(rows, filter.value, {\n            keys: ['channelname']\n          }, {\n            threshold: matchSorter.rankings.SIMPLEMATCH\n          });\n        },\n        filterAll: true\n      }, {\n        Header: 'Number of Tx',\n        accessor: 'txcount',\n        filterMethod: function filterMethod(filter, rows) {\n          return matchSorter(rows, filter.value, {\n            keys: ['txcount']\n          }, {\n            threshold: matchSorter.rankings.SIMPLEMATCH\n          });\n        },\n        filterAll: true,\n        width: 150\n      }, {\n        Header: 'Data Hash',\n        accessor: 'datahash',\n        className: classes.hash,\n        Cell: function Cell(row) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 5\n            }\n          }, /*#__PURE__*/React.createElement(\"ul\", {\n            className: classes.partialHash,\n            href: \"#/blocks\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 280,\n              columnNumber: 6\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.fullHash,\n            id: \"showTransactionId\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 7\n            }\n          }, row.value), ' '), ' ');\n        },\n        filterMethod: function filterMethod(filter, rows) {\n          return matchSorter(rows, filter.value, {\n            keys: ['datahash']\n          }, {\n            threshold: matchSorter.rankings.SIMPLEMATCH\n          });\n        },\n        filterAll: true\n      }, {\n        Header: 'Block Hash',\n        accessor: 'blockhash',\n        className: classes.hash,\n        Cell: function Cell(row) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 5\n            }\n          }, /*#__PURE__*/React.createElement(\"a\", {\n            \"data-command\": \"block-partial-hash\",\n            className: classes.partialHash,\n            onClick: function onClick() {\n              return _this.handleDialogOpenBlockHash(row.value);\n            },\n            href: \"#/blocks\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 6\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.fullHash,\n            id: \"showTransactionId\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 310,\n              columnNumber: 7\n            }\n          }, row.value), ' '), ' ');\n        },\n        filterMethod: function filterMethod(filter, rows) {\n          return matchSorter(rows, filter.value, {\n            keys: ['blockhash']\n          }, {\n            threshold: matchSorter.rankings.SIMPLEMATCH\n          });\n        },\n        filterAll: true\n      }, {\n        Header: 'Previous Hash',\n        accessor: 'prehash',\n        className: classes.hash,\n        Cell: function Cell(row) {\n          return /*#__PURE__*/React.createElement(\"span\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 5\n            }\n          }, /*#__PURE__*/React.createElement(\"ul\", {\n            className: classes.partialHash,\n            onClick: function onClick() {\n              return _this.handleDialogOpenBlockHash(row.value);\n            },\n            href: \"#/blocks\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 6\n            }\n          }, /*#__PURE__*/React.createElement(\"div\", {\n            className: classes.fullHash,\n            id: \"showTransactionId\",\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 337,\n              columnNumber: 7\n            }\n          }, row.value), ' '), ' ');\n        },\n        filterMethod: function filterMethod(filter, rows) {\n          return matchSorter(rows, filter.value, {\n            keys: ['prehash']\n          }, {\n            threshold: matchSorter.rankings.SIMPLEMATCH\n          });\n        },\n        filterAll: true,\n        width: 150\n      }, {\n        Header: 'Transactions',\n        accessor: 'txhash',\n        className: classes.hash,\n        Cell: function Cell(row) {\n          return /*#__PURE__*/React.createElement(\"ul\", {\n            __self: _assertThisInitialized(_this),\n            __source: {\n              fileName: _jsxFileName,\n              lineNumber: 359,\n              columnNumber: 5\n            }\n          });\n        },\n        filterMethod: function filterMethod(filter, rows) {\n          return matchSorter(rows, filter.value, {\n            keys: ['txhash']\n          }, {\n            threshold: matchSorter.rankings.SIMPLEMATCH\n          });\n        },\n        filterAll: true\n      }, {\n        Header: 'Size(KB)',\n        accessor: 'blksize',\n        filterMethod: function filterMethod(filter, rows) {\n          return matchSorter(rows, filter.value, {\n            keys: ['blksize']\n          }, {\n            threshold: matchSorter.rankings.SIMPLEMATCH\n          });\n        },\n        filterAll: true,\n        width: 150\n      }];\n    };\n\n    _this.state = {\n      dialogOpen: false,\n      dialogOpenBlockHash: false,\n      err: false,\n      search: false,\n      to: moment(),\n      orgs: [],\n      options: [],\n      filtered: [],\n      sorted: [],\n      from: moment().subtract(1, 'days'),\n      blockHash: {}\n    };\n    return _this;\n  }\n\n  _createClass(Blocks, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var blockList = this.props.blockList;\n      var selection = {};\n      blockList.forEach(function (element) {\n        selection[element.blocknum] = false;\n      });\n      var opts = [];\n      this.props.transactionByOrg.forEach(function (val) {\n        opts.push({\n          label: val.creator_msp_id,\n          value: val.creator_msp_id\n        });\n      });\n      this.setState({\n        selection: selection,\n        options: opts\n      });\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(nextProps) {\n      var _this2 = this;\n\n      if (this.state.search && nextProps.currentChannel !== this.props.currentChannel) {\n        if (this.interval !== undefined) {\n          clearInterval(this.interval);\n        }\n\n        this.interval = setInterval(function () {\n          _this2.searchBlockList(nextProps.currentChannel);\n        }, 60000);\n        this.searchBlockList(nextProps.currentChannel);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      clearInterval(this.interVal);\n    }\n  }, {\n    key: \"handleCustomRender\",\n    value: function handleCustomRender(selected, options) {\n      if (selected.length === 0) {\n        return 'Select Orgs';\n      }\n\n      if (selected.length === options.length) {\n        return 'All Orgs Selected';\n      }\n\n      return selected.join(',');\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var blockList = this.state.search ? this.props.blockListSearch : this.props.blockList;\n      console.log(\"binhnt: componenets.Lists.Blocks: blockList = \", blockList);\n      var _this$props2 = this.props,\n          transaction = _this$props2.transaction,\n          classes = _this$props2.classes;\n      var _this$state = this.state,\n          blockHash = _this$state.blockHash,\n          dialogOpen = _this$state.dialogOpen,\n          dialogOpenBlockHash = _this$state.dialogOpenBlockHash;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 420,\n          columnNumber: 4\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(classes.filter, \" row searchRow\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(classes.filterElement, \" col-md-3\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 422,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 423,\n          columnNumber: 7\n        }\n      }, \"From\"), /*#__PURE__*/React.createElement(DatePicker, {\n        id: \"from\",\n        selected: this.state.from,\n        showTimeSelect: true,\n        timeIntervals: 5,\n        dateFormat: \"LLL\",\n        onChange: function onChange(date) {\n          if (date > _this3.state.to) {\n            _this3.setState({\n              err: true,\n              from: date\n            });\n          } else {\n            _this3.setState({\n              from: date,\n              err: false\n            });\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 424,\n          columnNumber: 7\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"\".concat(classes.filterElement, \" col-md-3\"),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(\"label\", {\n        className: \"label\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 7\n        }\n      }, \"To\"), /*#__PURE__*/React.createElement(DatePicker, {\n        id: \"to\",\n        selected: this.state.to,\n        showTimeSelect: true,\n        timeIntervals: 5,\n        dateFormat: \"LLL\",\n        onChange: function onChange(date) {\n          if (date > _this3.state.from) {\n            _this3.setState({\n              to: date,\n              err: false\n            });\n          } else {\n            _this3.setState({\n              err: true,\n              to: date\n            });\n          }\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 7\n        }\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        className: \"validator \",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 455,\n          columnNumber: 8\n        }\n      }, this.state.err && /*#__PURE__*/React.createElement(\"span\", {\n        className: \" label border-red\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 10\n        }\n      }, ' ', \"From date should be less than To date\")))), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 465,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(MultiSelect, {\n        hasSelectAll: true,\n        valueRenderer: this.handleCustomRender,\n        shouldToggleOnHover: false,\n        selected: this.state.orgs,\n        options: this.state.options,\n        selectAllLabel: \"All Orgs\",\n        onSelectedChanged: function onSelectedChanged(value) {\n          _this3.handleMultiSelect(value);\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 466,\n          columnNumber: 7\n        }\n      })), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-2\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 478,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: classes.searchButton,\n        color: \"success\",\n        disabled: this.state.err,\n        onClick: /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n          return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n            while (1) {\n              switch (_context4.prev = _context4.next) {\n                case 0:\n                  _context4.next = 2;\n                  return _this3.handleSearch();\n\n                case 2:\n                case \"end\":\n                  return _context4.stop();\n              }\n            }\n          }, _callee4);\n        })),\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 479,\n          columnNumber: 7\n        }\n      }, \"Search\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 490,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: classes.filterButton,\n        color: \"primary\",\n        onClick: function onClick() {\n          _this3.handleClearSearch();\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 491,\n          columnNumber: 7\n        }\n      }, \"Reset\")), /*#__PURE__*/React.createElement(\"div\", {\n        className: \"col-md-1\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 501,\n          columnNumber: 6\n        }\n      }, /*#__PURE__*/React.createElement(Button, {\n        className: classes.filterButton,\n        color: \"secondary\",\n        onClick: function onClick() {\n          return _this3.setState({\n            filtered: [],\n            sorted: []\n          });\n        },\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 502,\n          columnNumber: 7\n        }\n      }, \"Clear Filter\"))), /*#__PURE__*/React.createElement(ReactTable, {\n        data: blockList,\n        columns: this.reactTableSetup(classes),\n        defaultPageSize: 10,\n        list: true,\n        filterable: true,\n        sorted: this.state.sorted,\n        onSortedChange: function onSortedChange(sorted) {\n          _this3.setState({\n            sorted: sorted\n          });\n        },\n        filtered: this.state.filtered,\n        onFilteredChange: function onFilteredChange(filtered) {\n          _this3.setState({\n            filtered: filtered\n          });\n        },\n        minRows: 0,\n        style: {\n          height: '750px'\n        },\n        showPagination: blockList.length >= 5,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 511,\n          columnNumber: 5\n        }\n      }), /*#__PURE__*/React.createElement(Dialog, {\n        open: dialogOpen,\n        onClose: this.handleDialogClose,\n        fullWidth: true,\n        maxWidth: \"md\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 530,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(TransactionView, {\n        transaction: transaction,\n        onClose: this.handleDialogClose,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 536,\n          columnNumber: 6\n        }\n      })), /*#__PURE__*/React.createElement(Dialog, {\n        open: dialogOpenBlockHash,\n        onClose: this.handleDialogCloseBlockHash,\n        fullWidth: true,\n        maxWidth: \"md\",\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 542,\n          columnNumber: 5\n        }\n      }, /*#__PURE__*/React.createElement(BlockView, {\n        blockHash: blockHash,\n        onClose: this.handleDialogCloseBlockHash,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 548,\n          columnNumber: 6\n        }\n      })));\n    }\n  }]);\n\n  return Blocks;\n}(Component);\nBlocks.propTypes = {\n  blockList: blockListType.isRequired,\n  currentChannel: currentChannelType.isRequired,\n  getTransaction: getTransactionType.isRequired,\n  transaction: transactionType\n};\nBlocks.defaultProps = {\n  transaction: null\n};\nexport default withStyles(styles)(Blocks);","map":{"version":3,"sources":["/home/teko/work/new_explorer/client/src/components/Lists/Blocks.js"],"names":["React","Component","withStyles","Dialog","Button","matchSorter","find","moment","isNull","ReactTable","BlockView","TransactionView","MultiSelect","DatePicker","blockListType","currentChannelType","getTransactionType","transactionType","styles","theme","type","palette","dark","hash","overflow","partialHash","textAlign","position","display","padding","backgroundColor","marginTop","marginLeft","borderRadius","color","opacity","undefined","fullHash","lastFullHash","filter","width","margin","filterButton","searchButton","filterElement","Blocks","props","searchBlockList","channel","query","Date","state","from","toString","to","i","orgs","length","channelhash","currentChannel","getBlockListSearch","handleDialogOpen","tid","getTransaction","setState","dialogOpen","handleMultiSelect","value","handleDialogClose","handleSearch","interval","clearInterval","setInterval","search","handleClearSearch","err","subtract","handleDialogOpenBlockHash","blockHash","blockList","blockListSearch","data","item","blockhash","dialogOpenBlockHash","handleDialogCloseBlockHash","handleEye","row","val","selection","Object","assign","index","reactTableSetup","classes","Header","accessor","filterMethod","rows","keys","threshold","rankings","SIMPLEMATCH","filterAll","className","Cell","options","filtered","sorted","forEach","element","blocknum","opts","transactionByOrg","push","label","creator_msp_id","nextProps","interVal","selected","join","console","log","transaction","date","handleCustomRender","height","propTypes","isRequired","defaultProps"],"mappings":";;;;;;;;;;AAAA;AACA;AACA;AAEA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,SAASC,UAAT,QAA2B,0BAA3B;AACA,OAAOC,MAAP,MAAmB,0BAAnB;AACA,SAASC,MAAT,QAAuB,YAAvB;AACA,OAAOC,WAAP,MAAwB,cAAxB;AACA,OAAOC,IAAP,MAAiB,aAAjB;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,SAASC,MAAT,QAAuB,MAAvB;AACA,OAAOC,UAAP,MAAuB,iBAAvB;AACA,OAAOC,SAAP,MAAsB,mBAAtB;AACA,OAAOC,eAAP,MAA4B,yBAA5B;AACA,OAAOC,WAAP,MAAwB,uBAAxB;AACA,OAAOC,UAAP,MAAuB,sBAAvB;AACA,SACCC,aADD,EAECC,kBAFD,EAGCC,kBAHD,EAICC,eAJD,QAKO,oBALP;AAOA;;AACA,IAAMC,MAAM,GAAG,SAATA,MAAS,CAAAC,KAAK,EAAI;AACvB,MAAQC,IAAR,GAAiBD,KAAK,CAACE,OAAvB,CAAQD,IAAR;AACA,MAAME,IAAI,GAAGF,IAAI,KAAK,MAAtB;AACA,SAAO;AACNG,IAAAA,IAAI,EAAE;AACL,uBAAiB;AAChBC,QAAAA,QAAQ,EAAE;AADM;AADZ,KADA;AAMNC,IAAAA,WAAW,EAAE;AACZC,MAAAA,SAAS,EAAE,QADC;AAEZC,MAAAA,QAAQ,EAAE,qBAFE;AAGZ,2BAAqB;AACpBC,QAAAA,OAAO,EAAE,OADW;AAEpBD,QAAAA,QAAQ,EAAE,qBAFU;AAGpBE,QAAAA,OAAO,EAAE,SAHW;AAIpBC,QAAAA,eAAe,EAAER,IAAI,GAAG,SAAH,GAAe,SAJhB;AAKpBS,QAAAA,SAAS,EAAE,CAAC,EALQ;AAMpBC,QAAAA,UAAU,EAAE,CAAC,GANO;AAOpBC,QAAAA,YAAY,EAAE,CAPM;AAQpBC,QAAAA,KAAK,EAAE,SARa;AASpBC,QAAAA,OAAO,EAAEb,IAAI,GAAG,CAAH,GAAOc;AATA,OAHT;AAcZ,+BAAyB;AACxBR,QAAAA,OAAO,EAAE,OADe;AAExBD,QAAAA,QAAQ,EAAE,qBAFc;AAGxBE,QAAAA,OAAO,EAAE,SAHe;AAIxBC,QAAAA,eAAe,EAAER,IAAI,GAAG,SAAH,GAAe,SAJZ;AAKxBS,QAAAA,SAAS,EAAE,CAAC,EALY;AAMxBC,QAAAA,UAAU,EAAE,CAAC,GANW;AAOxBC,QAAAA,YAAY,EAAE,CAPU;AAQxBC,QAAAA,KAAK,EAAE,SARiB;AASxBC,QAAAA,OAAO,EAAEb,IAAI,GAAG,CAAH,GAAOc;AATI;AAdb,KANP;AAgCNC,IAAAA,QAAQ,EAAE;AACTT,MAAAA,OAAO,EAAE;AADA,KAhCJ;AAmCNU,IAAAA,YAAY,EAAE;AACbV,MAAAA,OAAO,EAAE;AADI,KAnCR;AAsCNW,IAAAA,MAAM,EAAE;AACPC,MAAAA,KAAK,EAAE,MADA;AAEPd,MAAAA,SAAS,EAAE,QAFJ;AAGPe,MAAAA,MAAM,EAAE;AAHD,KAtCF;AA2CNC,IAAAA,YAAY,EAAE;AACbP,MAAAA,OAAO,EAAE,GADI;AAEbM,MAAAA,MAAM,EAAE,MAFK;AAGbD,MAAAA,KAAK,EAAE,iBAHM;AAIb,uBAAiB;AAJJ,KA3CR;AAiDNG,IAAAA,YAAY,EAAE;AACbR,MAAAA,OAAO,EAAE,GADI;AAEbM,MAAAA,MAAM,EAAE,MAFK;AAGbD,MAAAA,KAAK,EAAE,iBAHM;AAIbV,MAAAA,eAAe,EAAER,IAAI,GAAGc,SAAH,GAAe,SAJvB;AAKb,uBAAiB;AALJ,KAjDR;AAwDNQ,IAAAA,aAAa,EAAE;AACdlB,MAAAA,SAAS,EAAE,QADG;AAEdE,MAAAA,OAAO,EAAE,MAFK;AAGdC,MAAAA,OAAO,EAAE,gBAHK;AAId,iBAAW;AACVW,QAAAA,KAAK,EAAE,iBADG;AAEVT,QAAAA,SAAS,EAAE;AAFD,OAJG;AAQd,kBAAY;AACXU,QAAAA,MAAM,EAAE;AADG;AARE;AAxDT,GAAP;AAqEA,CAxED;;AA0EA,WAAaI,MAAb;AAAA;;AAAA;;AACC,kBAAYC,KAAZ,EAAmB;AAAA;;AAAA;;AAClB,8BAAMA,KAAN;;AADkB,UA4DnBC,eA5DmB;AAAA,0EA4DD,iBAAMC,OAAN;AAAA;AAAA;AAAA;AAAA;AAAA;AACbC,gBAAAA,KADa,kBACG,IAAIC,IAAJ,CAAS,MAAKC,KAAL,CAAWC,IAApB,EAA0BC,QAA1B,EADH,kBAC+C,IAAIH,IAAJ,CAC/D,MAAKC,KAAL,CAAWG,EADoD,EAE9DD,QAF8D,EAD/C;;AAIjB,qBAASE,CAAT,GAAa,CAAb,EAAgBA,CAAC,GAAG,MAAKJ,KAAL,CAAWK,IAAX,CAAgBC,MAApC,EAA4CF,CAAC,EAA7C,EAAiD;AAChDN,kBAAAA,KAAK,qBAAc,MAAKE,KAAL,CAAWK,IAAX,CAAgBD,CAAhB,CAAd,CAAL;AACA;;AACGG,gBAAAA,WAPa,GAOC,MAAKZ,KAAL,CAAWa,cAPZ;;AAQjB,oBAAIX,OAAO,KAAKZ,SAAhB,EAA2B;AAC1BsB,kBAAAA,WAAW,GAAGV,OAAd;AACA;;AAVgB;AAAA,uBAWX,MAAKF,KAAL,CAAWc,kBAAX,CAA8BF,WAA9B,EAA2CT,KAA3C,CAXW;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OA5DC;;AAAA;AAAA;AAAA;AAAA;;AAAA,UA0EnBY,gBA1EmB;AAAA,2EA0EA,kBAAMC,GAAN;AAAA;;AAAA;AAAA;AAAA;AAAA;AAAA,8BACyB,MAAKhB,KAD9B,EACViB,cADU,eACVA,cADU,EACMJ,cADN,eACMA,cADN;AAAA;AAAA,uBAEZI,cAAc,CAACJ,cAAD,EAAiBG,GAAjB,CAFF;;AAAA;AAGlB,sBAAKE,QAAL,CAAc;AAAEC,kBAAAA,UAAU,EAAE;AAAd,iBAAd;;AAHkB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,OA1EA;;AAAA;AAAA;AAAA;AAAA;;AAAA,UAgFnBC,iBAhFmB,GAgFC,UAAAC,KAAK,EAAI;AAC5B,YAAKH,QAAL,CAAc;AAAER,QAAAA,IAAI,EAAEW;AAAR,OAAd;AACA,KAlFkB;;AAAA,UAoFnBC,iBApFmB,GAoFC,YAAM;AACzB,YAAKJ,QAAL,CAAc;AAAEC,QAAAA,UAAU,EAAE;AAAd,OAAd;AACA,KAtFkB;;AAAA,UAwFnBI,YAxFmB,yEAwFJ;AAAA;AAAA;AAAA;AAAA;AACd,kBAAI,MAAKC,QAAL,KAAkBlC,SAAtB,EAAiC;AAChCmC,gBAAAA,aAAa,CAAC,MAAKD,QAAN,CAAb;AACA;;AACD,oBAAKA,QAAL,GAAgBE,WAAW,CAAC,YAAM;AACjC,sBAAKzB,eAAL;AACA,eAF0B,EAExB,KAFwB,CAA3B;AAJc;AAAA,qBAOR,MAAKA,eAAL,EAPQ;;AAAA;AAQd,oBAAKiB,QAAL,CAAc;AAAES,gBAAAA,MAAM,EAAE;AAAV,eAAd;;AARc;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAxFI;;AAAA,UAmGnBC,iBAnGmB,GAmGC,YAAM;AACzB,UAAI,MAAKJ,QAAL,KAAkBlC,SAAtB,EAAiC;AAChCmC,QAAAA,aAAa,CAAC,MAAKD,QAAN,CAAb;AACA;;AACD,YAAKN,QAAL,CAAc;AACbS,QAAAA,MAAM,EAAE,KADK;AAEbnB,QAAAA,EAAE,EAAE/C,MAAM,EAFG;AAGbiD,QAAAA,IAAI,EAAE,EAHO;AAIbmB,QAAAA,GAAG,EAAE,KAJQ;AAKbvB,QAAAA,IAAI,EAAE7C,MAAM,GAAGqE,QAAT,CAAkB,CAAlB,EAAqB,MAArB;AALO,OAAd;AAOA,KA9GkB;;AAAA,UAgHnBC,yBAhHmB,GAgHS,UAAAC,SAAS,EAAI;AACxC,UAAMC,SAAS,GAAG,MAAK5B,KAAL,CAAWsB,MAAX,GACf,MAAK3B,KAAL,CAAWkC,eADI,GAEf,MAAKlC,KAAL,CAAWiC,SAFd;AAGA,UAAME,IAAI,GAAG3E,IAAI,CAACyE,SAAD,EAAY,UAAAG,IAAI;AAAA,eAAIA,IAAI,CAACC,SAAL,KAAmBL,SAAvB;AAAA,OAAhB,CAAjB;;AAEA,YAAKd,QAAL,CAAc;AACboB,QAAAA,mBAAmB,EAAE,IADR;AAEbN,QAAAA,SAAS,EAAEG;AAFE,OAAd;AAIA,KA1HkB;;AAAA,UA4HnBI,0BA5HmB,GA4HU,YAAM;AAClC,YAAKrB,QAAL,CAAc;AAAEoB,QAAAA,mBAAmB,EAAE;AAAvB,OAAd;AACA,KA9HkB;;AAAA,UAgInBE,SAhImB,GAgIP,UAACC,GAAD,EAAMC,GAAN,EAAc;AACzB,UAAQC,SAAR,GAAsB,MAAKtC,KAA3B,CAAQsC,SAAR;AACA,UAAMR,IAAI,GAAGS,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBF,SAAlB,sBAAgCF,GAAG,CAACK,KAApC,EAA4C,CAACJ,GAA7C,EAAb;;AACA,YAAKxB,QAAL,CAAc;AAAEyB,QAAAA,SAAS,EAAER;AAAb,OAAd;AACA,KApIkB;;AAAA,UAsInBY,eAtImB,GAsID,UAAAC,OAAO;AAAA,aAAI,CAC5B;AACCC,QAAAA,MAAM,EAAE,cADT;AAECC,QAAAA,QAAQ,EAAE,UAFX;AAGCC,QAAAA,YAAY,EAAE,sBAAC1D,MAAD,EAAS2D,IAAT;AAAA,iBACb7F,WAAW,CACV6F,IADU,EAEV3D,MAAM,CAAC4B,KAFG,EAGV;AAAEgC,YAAAA,IAAI,EAAE,CAAC,UAAD;AAAR,WAHU,EAIV;AAAEC,YAAAA,SAAS,EAAE/F,WAAW,CAACgG,QAAZ,CAAqBC;AAAlC,WAJU,CADE;AAAA,SAHf;AAUCC,QAAAA,SAAS,EAAE,IAVZ;AAWC/D,QAAAA,KAAK,EAAE;AAXR,OAD4B,EAc5B;AACCuD,QAAAA,MAAM,EAAE,cADT;AAECC,QAAAA,QAAQ,EAAE,aAFX;AAGCC,QAAAA,YAAY,EAAE,sBAAC1D,MAAD,EAAS2D,IAAT;AAAA,iBACb7F,WAAW,CACV6F,IADU,EAEV3D,MAAM,CAAC4B,KAFG,EAGV;AAAEgC,YAAAA,IAAI,EAAE,CAAC,aAAD;AAAR,WAHU,EAIV;AAAEC,YAAAA,SAAS,EAAE/F,WAAW,CAACgG,QAAZ,CAAqBC;AAAlC,WAJU,CADE;AAAA,SAHf;AAUCC,QAAAA,SAAS,EAAE;AAVZ,OAd4B,EA0B5B;AACCR,QAAAA,MAAM,EAAE,cADT;AAECC,QAAAA,QAAQ,EAAE,SAFX;AAGCC,QAAAA,YAAY,EAAE,sBAAC1D,MAAD,EAAS2D,IAAT;AAAA,iBACb7F,WAAW,CACV6F,IADU,EAEV3D,MAAM,CAAC4B,KAFG,EAGV;AAAEgC,YAAAA,IAAI,EAAE,CAAC,SAAD;AAAR,WAHU,EAIV;AAAEC,YAAAA,SAAS,EAAE/F,WAAW,CAACgG,QAAZ,CAAqBC;AAAlC,WAJU,CADE;AAAA,SAHf;AAUCC,QAAAA,SAAS,EAAE,IAVZ;AAWC/D,QAAAA,KAAK,EAAE;AAXR,OA1B4B,EAuC5B;AACCuD,QAAAA,MAAM,EAAE,WADT;AAECC,QAAAA,QAAQ,EAAE,UAFX;AAGCQ,QAAAA,SAAS,EAAEV,OAAO,CAACvE,IAHpB;AAICkF,QAAAA,IAAI,EAAE,cAAAlB,GAAG;AAAA,8BACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACC;AAAI,YAAA,SAAS,EAAEO,OAAO,CAACrE,WAAvB;AAAoC,YAAA,IAAI,EAAC,UAAzC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACC;AAAK,YAAA,SAAS,EAAEqE,OAAO,CAACzD,QAAxB;AAAkC,YAAA,EAAE,EAAC,mBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACEkD,GAAG,CAACpB,KADN,CADD,EAGQ,GAHR,CADD,EAOO,GAPP,CADQ;AAAA,SAJV;AAeC8B,QAAAA,YAAY,EAAE,sBAAC1D,MAAD,EAAS2D,IAAT;AAAA,iBACb7F,WAAW,CACV6F,IADU,EAEV3D,MAAM,CAAC4B,KAFG,EAGV;AAAEgC,YAAAA,IAAI,EAAE,CAAC,UAAD;AAAR,WAHU,EAIV;AAAEC,YAAAA,SAAS,EAAE/F,WAAW,CAACgG,QAAZ,CAAqBC;AAAlC,WAJU,CADE;AAAA,SAff;AAsBCC,QAAAA,SAAS,EAAE;AAtBZ,OAvC4B,EA+D5B;AACCR,QAAAA,MAAM,EAAE,YADT;AAECC,QAAAA,QAAQ,EAAE,WAFX;AAGCQ,QAAAA,SAAS,EAAEV,OAAO,CAACvE,IAHpB;AAICkF,QAAAA,IAAI,EAAE,cAAAlB,GAAG;AAAA,8BACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACC;AACC,4BAAa,oBADd;AAEC,YAAA,SAAS,EAAEO,OAAO,CAACrE,WAFpB;AAGC,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAKoD,yBAAL,CAA+BU,GAAG,CAACpB,KAAnC,CAAN;AAAA,aAHV;AAIC,YAAA,IAAI,EAAC,UAJN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAMC;AAAK,YAAA,SAAS,EAAE2B,OAAO,CAACzD,QAAxB;AAAkC,YAAA,EAAE,EAAC,mBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACEkD,GAAG,CAACpB,KADN,CAND,EAQQ,GARR,CADD,EAWM,GAXN,CADQ;AAAA,SAJV;AAmBC8B,QAAAA,YAAY,EAAE,sBAAC1D,MAAD,EAAS2D,IAAT;AAAA,iBACb7F,WAAW,CACV6F,IADU,EAEV3D,MAAM,CAAC4B,KAFG,EAGV;AAAEgC,YAAAA,IAAI,EAAE,CAAC,WAAD;AAAR,WAHU,EAIV;AAAEC,YAAAA,SAAS,EAAE/F,WAAW,CAACgG,QAAZ,CAAqBC;AAAlC,WAJU,CADE;AAAA,SAnBf;AA0BCC,QAAAA,SAAS,EAAE;AA1BZ,OA/D4B,EA2F5B;AACCR,QAAAA,MAAM,EAAE,eADT;AAECC,QAAAA,QAAQ,EAAE,SAFX;AAGCQ,QAAAA,SAAS,EAAEV,OAAO,CAACvE,IAHpB;AAICkF,QAAAA,IAAI,EAAE,cAAAlB,GAAG;AAAA,8BACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BACC;AACC,YAAA,SAAS,EAAEO,OAAO,CAACrE,WADpB;AAEC,YAAA,OAAO,EAAE;AAAA,qBAAM,MAAKoD,yBAAL,CAA+BU,GAAG,CAACpB,KAAnC,CAAN;AAAA,aAFV;AAGC,YAAA,IAAI,EAAC,UAHN;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,0BAKC;AAAK,YAAA,SAAS,EAAE2B,OAAO,CAACzD,QAAxB;AAAkC,YAAA,EAAE,EAAC,mBAArC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,aACEkD,GAAG,CAACpB,KADN,CALD,EAOQ,GAPR,CADD,EAUO,GAVP,CADQ;AAAA,SAJV;AAkBC8B,QAAAA,YAAY,EAAE,sBAAC1D,MAAD,EAAS2D,IAAT;AAAA,iBACb7F,WAAW,CACV6F,IADU,EAEV3D,MAAM,CAAC4B,KAFG,EAGV;AAAEgC,YAAAA,IAAI,EAAE,CAAC,SAAD;AAAR,WAHU,EAIV;AAAEC,YAAAA,SAAS,EAAE/F,WAAW,CAACgG,QAAZ,CAAqBC;AAAlC,WAJU,CADE;AAAA,SAlBf;AAyBCC,QAAAA,SAAS,EAAE,IAzBZ;AA0BC/D,QAAAA,KAAK,EAAE;AA1BR,OA3F4B,EAuH5B;AACCuD,QAAAA,MAAM,EAAE,cADT;AAECC,QAAAA,QAAQ,EAAE,QAFX;AAGCQ,QAAAA,SAAS,EAAEV,OAAO,CAACvE,IAHpB;AAICkF,QAAAA,IAAI,EAAE,cAAAlB,GAAG;AAAA,8BACR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADQ;AAAA,SAJV;AA+BCU,QAAAA,YAAY,EAAE,sBAAC1D,MAAD,EAAS2D,IAAT;AAAA,iBACb7F,WAAW,CACV6F,IADU,EAEV3D,MAAM,CAAC4B,KAFG,EAGV;AAAEgC,YAAAA,IAAI,EAAE,CAAC,QAAD;AAAR,WAHU,EAIV;AAAEC,YAAAA,SAAS,EAAE/F,WAAW,CAACgG,QAAZ,CAAqBC;AAAlC,WAJU,CADE;AAAA,SA/Bf;AAsCCC,QAAAA,SAAS,EAAE;AAtCZ,OAvH4B,EA+J5B;AACCR,QAAAA,MAAM,EAAE,UADT;AAECC,QAAAA,QAAQ,EAAE,SAFX;AAGCC,QAAAA,YAAY,EAAE,sBAAC1D,MAAD,EAAS2D,IAAT;AAAA,iBACb7F,WAAW,CACV6F,IADU,EAEV3D,MAAM,CAAC4B,KAFG,EAGV;AAAEgC,YAAAA,IAAI,EAAE,CAAC,SAAD;AAAR,WAHU,EAIV;AAAEC,YAAAA,SAAS,EAAE/F,WAAW,CAACgG,QAAZ,CAAqBC;AAAlC,WAJU,CADE;AAAA,SAHf;AAUCC,QAAAA,SAAS,EAAE,IAVZ;AAWC/D,QAAAA,KAAK,EAAE;AAXR,OA/J4B,CAAJ;AAAA,KAtIN;;AAElB,UAAKW,KAAL,GAAa;AACZc,MAAAA,UAAU,EAAE,KADA;AAEZmB,MAAAA,mBAAmB,EAAE,KAFT;AAGZT,MAAAA,GAAG,EAAE,KAHO;AAIZF,MAAAA,MAAM,EAAE,KAJI;AAKZnB,MAAAA,EAAE,EAAE/C,MAAM,EALE;AAMZiD,MAAAA,IAAI,EAAE,EANM;AAOZkD,MAAAA,OAAO,EAAE,EAPG;AAQZC,MAAAA,QAAQ,EAAE,EARE;AASZC,MAAAA,MAAM,EAAE,EATI;AAUZxD,MAAAA,IAAI,EAAE7C,MAAM,GAAGqE,QAAT,CAAkB,CAAlB,EAAqB,MAArB,CAVM;AAWZE,MAAAA,SAAS,EAAE;AAXC,KAAb;AAFkB;AAelB;;AAhBF;AAAA;AAAA,WAkBC,6BAAoB;AACnB,UAAQC,SAAR,GAAsB,KAAKjC,KAA3B,CAAQiC,SAAR;AACA,UAAMU,SAAS,GAAG,EAAlB;AACAV,MAAAA,SAAS,CAAC8B,OAAV,CAAkB,UAAAC,OAAO,EAAI;AAC5BrB,QAAAA,SAAS,CAACqB,OAAO,CAACC,QAAT,CAAT,GAA8B,KAA9B;AACA,OAFD;AAGA,UAAMC,IAAI,GAAG,EAAb;AACA,WAAKlE,KAAL,CAAWmE,gBAAX,CAA4BJ,OAA5B,CAAoC,UAAArB,GAAG,EAAI;AAC1CwB,QAAAA,IAAI,CAACE,IAAL,CAAU;AAAEC,UAAAA,KAAK,EAAE3B,GAAG,CAAC4B,cAAb;AAA6BjD,UAAAA,KAAK,EAAEqB,GAAG,CAAC4B;AAAxC,SAAV;AACA,OAFD;AAGA,WAAKpD,QAAL,CAAc;AAAEyB,QAAAA,SAAS,EAATA,SAAF;AAAaiB,QAAAA,OAAO,EAAEM;AAAtB,OAAd;AACA;AA7BF;AAAA;AAAA,WA+BC,mCAA0BK,SAA1B,EAAqC;AAAA;;AACpC,UACC,KAAKlE,KAAL,CAAWsB,MAAX,IACA4C,SAAS,CAAC1D,cAAV,KAA6B,KAAKb,KAAL,CAAWa,cAFzC,EAGE;AACD,YAAI,KAAKW,QAAL,KAAkBlC,SAAtB,EAAiC;AAChCmC,UAAAA,aAAa,CAAC,KAAKD,QAAN,CAAb;AACA;;AACD,aAAKA,QAAL,GAAgBE,WAAW,CAAC,YAAM;AACjC,UAAA,MAAI,CAACzB,eAAL,CAAqBsE,SAAS,CAAC1D,cAA/B;AACA,SAF0B,EAExB,KAFwB,CAA3B;AAGA,aAAKZ,eAAL,CAAqBsE,SAAS,CAAC1D,cAA/B;AACA;AACD;AA5CF;AAAA;AAAA,WA8CC,gCAAuB;AACtBY,MAAAA,aAAa,CAAC,KAAK+C,QAAN,CAAb;AACA;AAhDF;AAAA;AAAA,WAkDC,4BAAmBC,QAAnB,EAA6Bb,OAA7B,EAAsC;AACrC,UAAIa,QAAQ,CAAC9D,MAAT,KAAoB,CAAxB,EAA2B;AAC1B,eAAO,aAAP;AACA;;AACD,UAAI8D,QAAQ,CAAC9D,MAAT,KAAoBiD,OAAO,CAACjD,MAAhC,EAAwC;AACvC,eAAO,mBAAP;AACA;;AAED,aAAO8D,QAAQ,CAACC,IAAT,CAAc,GAAd,CAAP;AACA;AA3DF;AAAA;AAAA,WAqTC,kBAAS;AAAA;;AACR,UAAMzC,SAAS,GAAG,KAAK5B,KAAL,CAAWsB,MAAX,GACf,KAAK3B,KAAL,CAAWkC,eADI,GAEf,KAAKlC,KAAL,CAAWiC,SAFd;AAIA0C,MAAAA,OAAO,CAACC,GAAR,CAAY,gDAAZ,EAA8D3C,SAA9D;AAGA,yBAAiC,KAAKjC,KAAtC;AAAA,UAAQ6E,WAAR,gBAAQA,WAAR;AAAA,UAAqB7B,OAArB,gBAAqBA,OAArB;AACA,wBAAuD,KAAK3C,KAA5D;AAAA,UAAQ2B,SAAR,eAAQA,SAAR;AAAA,UAAmBb,UAAnB,eAAmBA,UAAnB;AAAA,UAA+BmB,mBAA/B,eAA+BA,mBAA/B;AACA,0BACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAK,QAAA,SAAS,YAAKU,OAAO,CAACvD,MAAb,mBAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAK,QAAA,SAAS,YAAKuD,OAAO,CAAClD,aAAb,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAO,QAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,gBADD,eAEC,oBAAC,UAAD;AACC,QAAA,EAAE,EAAC,MADJ;AAEC,QAAA,QAAQ,EAAE,KAAKO,KAAL,CAAWC,IAFtB;AAGC,QAAA,cAAc,MAHf;AAIC,QAAA,aAAa,EAAE,CAJhB;AAKC,QAAA,UAAU,EAAC,KALZ;AAMC,QAAA,QAAQ,EAAE,kBAAAwE,IAAI,EAAI;AACjB,cAAIA,IAAI,GAAG,MAAI,CAACzE,KAAL,CAAWG,EAAtB,EAA0B;AACzB,YAAA,MAAI,CAACU,QAAL,CAAc;AAAEW,cAAAA,GAAG,EAAE,IAAP;AAAavB,cAAAA,IAAI,EAAEwE;AAAnB,aAAd;AACA,WAFD,MAEO;AACN,YAAA,MAAI,CAAC5D,QAAL,CAAc;AAAEZ,cAAAA,IAAI,EAAEwE,IAAR;AAAcjD,cAAAA,GAAG,EAAE;AAAnB,aAAd;AACA;AACD,SAZF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAFD,CADD,eAkBC;AAAK,QAAA,SAAS,YAAKmB,OAAO,CAAClD,aAAb,cAAd;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC;AAAO,QAAA,SAAS,EAAC,OAAjB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cADD,eAEC,oBAAC,UAAD;AACC,QAAA,EAAE,EAAC,IADJ;AAEC,QAAA,QAAQ,EAAE,KAAKO,KAAL,CAAWG,EAFtB;AAGC,QAAA,cAAc,MAHf;AAIC,QAAA,aAAa,EAAE,CAJhB;AAKC,QAAA,UAAU,EAAC,KALZ;AAMC,QAAA,QAAQ,EAAE,kBAAAsE,IAAI,EAAI;AACjB,cAAIA,IAAI,GAAG,MAAI,CAACzE,KAAL,CAAWC,IAAtB,EAA4B;AAC3B,YAAA,MAAI,CAACY,QAAL,CAAc;AAAEV,cAAAA,EAAE,EAAEsE,IAAN;AAAYjD,cAAAA,GAAG,EAAE;AAAjB,aAAd;AACA,WAFD,MAEO;AACN,YAAA,MAAI,CAACX,QAAL,CAAc;AAAEW,cAAAA,GAAG,EAAE,IAAP;AAAarB,cAAAA,EAAE,EAAEsE;AAAjB,aAAd;AACA;AACD,SAZF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAcC;AAAK,QAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,KAAKzE,KAAL,CAAWwB,GAAX,iBACA;AAAM,QAAA,SAAS,EAAC,mBAAhB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SACE,GADF,0CAFF,CAdD,CAFD,CAlBD,eA4CC;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC,oBAAC,WAAD;AACC,QAAA,YAAY,MADb;AAEC,QAAA,aAAa,EAAE,KAAKkD,kBAFrB;AAGC,QAAA,mBAAmB,EAAE,KAHtB;AAIC,QAAA,QAAQ,EAAE,KAAK1E,KAAL,CAAWK,IAJtB;AAKC,QAAA,OAAO,EAAE,KAAKL,KAAL,CAAWuD,OALrB;AAMC,QAAA,cAAc,EAAC,UANhB;AAOC,QAAA,iBAAiB,EAAE,2BAAAvC,KAAK,EAAI;AAC3B,UAAA,MAAI,CAACD,iBAAL,CAAuBC,KAAvB;AACA,SATF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QADD,CA5CD,eAyDC;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC,oBAAC,MAAD;AACC,QAAA,SAAS,EAAE2B,OAAO,CAACnD,YADpB;AAEC,QAAA,KAAK,EAAC,SAFP;AAGC,QAAA,QAAQ,EAAE,KAAKQ,KAAL,CAAWwB,GAHtB;AAIC,QAAA,OAAO,wEAAE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBACF,MAAI,CAACN,YAAL,EADE;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAF,EAJR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBADD,CAzDD,eAqEC;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC,oBAAC,MAAD;AACC,QAAA,SAAS,EAAEyB,OAAO,CAACpD,YADpB;AAEC,QAAA,KAAK,EAAC,SAFP;AAGC,QAAA,OAAO,EAAE,mBAAM;AACd,UAAA,MAAI,CAACgC,iBAAL;AACA,SALF;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,iBADD,CArED,eAgFC;AAAK,QAAA,SAAS,EAAC,UAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBACC,oBAAC,MAAD;AACC,QAAA,SAAS,EAAEoB,OAAO,CAACpD,YADpB;AAEC,QAAA,KAAK,EAAC,WAFP;AAGC,QAAA,OAAO,EAAE;AAAA,iBAAM,MAAI,CAACsB,QAAL,CAAc;AAAE2C,YAAAA,QAAQ,EAAE,EAAZ;AAAgBC,YAAAA,MAAM,EAAE;AAAxB,WAAd,CAAN;AAAA,SAHV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,wBADD,CAhFD,CADD,eA2FC,oBAAC,UAAD;AACC,QAAA,IAAI,EAAE7B,SADP;AAEC,QAAA,OAAO,EAAE,KAAKc,eAAL,CAAqBC,OAArB,CAFV;AAGC,QAAA,eAAe,EAAE,EAHlB;AAIC,QAAA,IAAI,MAJL;AAKC,QAAA,UAAU,MALX;AAMC,QAAA,MAAM,EAAE,KAAK3C,KAAL,CAAWyD,MANpB;AAOC,QAAA,cAAc,EAAE,wBAAAA,MAAM,EAAI;AACzB,UAAA,MAAI,CAAC5C,QAAL,CAAc;AAAE4C,YAAAA,MAAM,EAANA;AAAF,WAAd;AACA,SATF;AAUC,QAAA,QAAQ,EAAE,KAAKzD,KAAL,CAAWwD,QAVtB;AAWC,QAAA,gBAAgB,EAAE,0BAAAA,QAAQ,EAAI;AAC7B,UAAA,MAAI,CAAC3C,QAAL,CAAc;AAAE2C,YAAAA,QAAQ,EAARA;AAAF,WAAd;AACA,SAbF;AAcC,QAAA,OAAO,EAAE,CAdV;AAeC,QAAA,KAAK,EAAE;AAAEmB,UAAAA,MAAM,EAAE;AAAV,SAfR;AAgBC,QAAA,cAAc,EAAE/C,SAAS,CAACtB,MAAV,IAAoB,CAhBrC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QA3FD,eA8GC,oBAAC,MAAD;AACC,QAAA,IAAI,EAAEQ,UADP;AAEC,QAAA,OAAO,EAAE,KAAKG,iBAFf;AAGC,QAAA,SAAS,MAHV;AAIC,QAAA,QAAQ,EAAC,IAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAMC,oBAAC,eAAD;AACC,QAAA,WAAW,EAAEuD,WADd;AAEC,QAAA,OAAO,EAAE,KAAKvD,iBAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAND,CA9GD,eA0HC,oBAAC,MAAD;AACC,QAAA,IAAI,EAAEgB,mBADP;AAEC,QAAA,OAAO,EAAE,KAAKC,0BAFf;AAGC,QAAA,SAAS,MAHV;AAIC,QAAA,QAAQ,EAAC,IAJV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,sBAMC,oBAAC,SAAD;AACC,QAAA,SAAS,EAAEP,SADZ;AAEC,QAAA,OAAO,EAAE,KAAKO,0BAFf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,QAND,CA1HD,CADD;AAwIA;AAvcF;;AAAA;AAAA,EAA4BpF,SAA5B;AA0cA4C,MAAM,CAACkF,SAAP,GAAmB;AAClBhD,EAAAA,SAAS,EAAEjE,aAAa,CAACkH,UADP;AAElBrE,EAAAA,cAAc,EAAE5C,kBAAkB,CAACiH,UAFjB;AAGlBjE,EAAAA,cAAc,EAAE/C,kBAAkB,CAACgH,UAHjB;AAIlBL,EAAAA,WAAW,EAAE1G;AAJK,CAAnB;AAOA4B,MAAM,CAACoF,YAAP,GAAsB;AACrBN,EAAAA,WAAW,EAAE;AADQ,CAAtB;AAIA,eAAezH,UAAU,CAACgB,MAAD,CAAV,CAAmB2B,MAAnB,CAAf","sourcesContent":["/**\n *    SPDX-License-Identifier: Apache-2.0\n */\n\nimport React, { Component } from 'react';\nimport { withStyles } from '@material-ui/core/styles';\nimport Dialog from '@material-ui/core/Dialog';\nimport { Button } from 'reactstrap';\nimport matchSorter from 'match-sorter';\nimport find from 'lodash/find';\nimport moment from 'moment';\nimport { isNull } from 'util';\nimport ReactTable from '../Styled/Table';\nimport BlockView from '../View/BlockView';\nimport TransactionView from '../View/TransactionView';\nimport MultiSelect from '../Styled/MultiSelect';\nimport DatePicker from '../Styled/DatePicker';\nimport {\n\tblockListType,\n\tcurrentChannelType,\n\tgetTransactionType,\n\ttransactionType\n} from '../../consts/types';\n\n/* istanbul ignore next */\nconst styles = theme => {\n\tconst { type } = theme.palette;\n\tconst dark = type === 'dark';\n\treturn {\n\t\thash: {\n\t\t\t'&, & li, & ul': {\n\t\t\t\toverflow: 'visible !important'\n\t\t\t}\n\t\t},\n\t\tpartialHash: {\n\t\t\ttextAlign: 'center',\n\t\t\tposition: 'relative !important',\n\t\t\t'&:hover $fullHash': {\n\t\t\t\tdisplay: 'block',\n\t\t\t\tposition: 'absolute !important',\n\t\t\t\tpadding: '4px 4px',\n\t\t\t\tbackgroundColor: dark ? '#5e558e' : '#000000',\n\t\t\t\tmarginTop: -30,\n\t\t\t\tmarginLeft: -215,\n\t\t\t\tborderRadius: 8,\n\t\t\t\tcolor: '#ffffff',\n\t\t\t\topacity: dark ? 1 : undefined\n\t\t\t},\n\t\t\t'&:hover $lastFullHash': {\n\t\t\t\tdisplay: 'block',\n\t\t\t\tposition: 'absolute !important',\n\t\t\t\tpadding: '4px 4px',\n\t\t\t\tbackgroundColor: dark ? '#5e558e' : '#000000',\n\t\t\t\tmarginTop: -30,\n\t\t\t\tmarginLeft: -415,\n\t\t\t\tborderRadius: 8,\n\t\t\t\tcolor: '#ffffff',\n\t\t\t\topacity: dark ? 1 : undefined\n\t\t\t}\n\t\t},\n\t\tfullHash: {\n\t\t\tdisplay: 'none'\n\t\t},\n\t\tlastFullHash: {\n\t\t\tdisplay: 'none'\n\t\t},\n\t\tfilter: {\n\t\t\twidth: '100%',\n\t\t\ttextAlign: 'center',\n\t\t\tmargin: '0px !important'\n\t\t},\n\t\tfilterButton: {\n\t\t\topacity: 0.8,\n\t\t\tmargin: 'auto',\n\t\t\twidth: '100% !important',\n\t\t\t'margin-bottom': '4px'\n\t\t},\n\t\tsearchButton: {\n\t\t\topacity: 0.8,\n\t\t\tmargin: 'auto',\n\t\t\twidth: '100% !important',\n\t\t\tbackgroundColor: dark ? undefined : '#086108',\n\t\t\t'margin-bottom': '4px'\n\t\t},\n\t\tfilterElement: {\n\t\t\ttextAlign: 'center',\n\t\t\tdisplay: 'flex',\n\t\t\tpadding: '0px !important',\n\t\t\t'& > div': {\n\t\t\t\twidth: '100% !important',\n\t\t\t\tmarginTop: 20\n\t\t\t},\n\t\t\t'& .label': {\n\t\t\t\tmargin: '25px 10px 0px 10px'\n\t\t\t}\n\t\t}\n\t};\n};\n\nexport class Blocks extends Component {\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tthis.state = {\n\t\t\tdialogOpen: false,\n\t\t\tdialogOpenBlockHash: false,\n\t\t\terr: false,\n\t\t\tsearch: false,\n\t\t\tto: moment(),\n\t\t\torgs: [],\n\t\t\toptions: [],\n\t\t\tfiltered: [],\n\t\t\tsorted: [],\n\t\t\tfrom: moment().subtract(1, 'days'),\n\t\t\tblockHash: {}\n\t\t};\n\t}\n\n\tcomponentDidMount() {\n\t\tconst { blockList } = this.props;\n\t\tconst selection = {};\n\t\tblockList.forEach(element => {\n\t\t\tselection[element.blocknum] = false;\n\t\t});\n\t\tconst opts = [];\n\t\tthis.props.transactionByOrg.forEach(val => {\n\t\t\topts.push({ label: val.creator_msp_id, value: val.creator_msp_id });\n\t\t});\n\t\tthis.setState({ selection, options: opts });\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tif (\n\t\t\tthis.state.search &&\n\t\t\tnextProps.currentChannel !== this.props.currentChannel\n\t\t) {\n\t\t\tif (this.interval !== undefined) {\n\t\t\t\tclearInterval(this.interval);\n\t\t\t}\n\t\t\tthis.interval = setInterval(() => {\n\t\t\t\tthis.searchBlockList(nextProps.currentChannel);\n\t\t\t}, 60000);\n\t\t\tthis.searchBlockList(nextProps.currentChannel);\n\t\t}\n\t}\n\n\tcomponentWillUnmount() {\n\t\tclearInterval(this.interVal);\n\t}\n\n\thandleCustomRender(selected, options) {\n\t\tif (selected.length === 0) {\n\t\t\treturn 'Select Orgs';\n\t\t}\n\t\tif (selected.length === options.length) {\n\t\t\treturn 'All Orgs Selected';\n\t\t}\n\n\t\treturn selected.join(',');\n\t}\n\n\tsearchBlockList = async channel => {\n\t\tlet query = `from=${new Date(this.state.from).toString()}&&to=${new Date(\n\t\t\tthis.state.to\n\t\t).toString()}`;\n\t\tfor (let i = 0; i < this.state.orgs.length; i++) {\n\t\t\tquery += `&&orgs=${this.state.orgs[i]}`;\n\t\t}\n\t\tlet channelhash = this.props.currentChannel;\n\t\tif (channel !== undefined) {\n\t\t\tchannelhash = channel;\n\t\t}\n\t\tawait this.props.getBlockListSearch(channelhash, query);\n\t};\n\n\thandleDialogOpen = async tid => {\n\t\tconst { getTransaction, currentChannel } = this.props;\n\t\tawait getTransaction(currentChannel, tid);\n\t\tthis.setState({ dialogOpen: true });\n\t};\n\n\thandleMultiSelect = value => {\n\t\tthis.setState({ orgs: value });\n\t};\n\n\thandleDialogClose = () => {\n\t\tthis.setState({ dialogOpen: false });\n\t};\n\n\thandleSearch = async () => {\n\t\tif (this.interval !== undefined) {\n\t\t\tclearInterval(this.interval);\n\t\t}\n\t\tthis.interval = setInterval(() => {\n\t\t\tthis.searchBlockList();\n\t\t}, 60000);\n\t\tawait this.searchBlockList();\n\t\tthis.setState({ search: true });\n\t};\n\n\thandleClearSearch = () => {\n\t\tif (this.interval !== undefined) {\n\t\t\tclearInterval(this.interval);\n\t\t}\n\t\tthis.setState({\n\t\t\tsearch: false,\n\t\t\tto: moment(),\n\t\t\torgs: [],\n\t\t\terr: false,\n\t\t\tfrom: moment().subtract(1, 'days')\n\t\t});\n\t};\n\n\thandleDialogOpenBlockHash = blockHash => {\n\t\tconst blockList = this.state.search\n\t\t\t? this.props.blockListSearch\n\t\t\t: this.props.blockList;\n\t\tconst data = find(blockList, item => item.blockhash === blockHash);\n\n\t\tthis.setState({\n\t\t\tdialogOpenBlockHash: true,\n\t\t\tblockHash: data\n\t\t});\n\t};\n\n\thandleDialogCloseBlockHash = () => {\n\t\tthis.setState({ dialogOpenBlockHash: false });\n\t};\n\n\thandleEye = (row, val) => {\n\t\tconst { selection } = this.state;\n\t\tconst data = Object.assign({}, selection, { [row.index]: !val });\n\t\tthis.setState({ selection: data });\n\t};\n\n\treactTableSetup = classes => [\n\t\t{\n\t\t\tHeader: 'Block Number',\n\t\t\taccessor: 'blocknum',\n\t\t\tfilterMethod: (filter, rows) =>\n\t\t\t\tmatchSorter(\n\t\t\t\t\trows,\n\t\t\t\t\tfilter.value,\n\t\t\t\t\t{ keys: ['blocknum'] },\n\t\t\t\t\t{ threshold: matchSorter.rankings.SIMPLEMATCH }\n\t\t\t\t),\n\t\t\tfilterAll: true,\n\t\t\twidth: 150\n\t\t},\n\t\t{\n\t\t\tHeader: 'Channel Name',\n\t\t\taccessor: 'channelname',\n\t\t\tfilterMethod: (filter, rows) =>\n\t\t\t\tmatchSorter(\n\t\t\t\t\trows,\n\t\t\t\t\tfilter.value,\n\t\t\t\t\t{ keys: ['channelname'] },\n\t\t\t\t\t{ threshold: matchSorter.rankings.SIMPLEMATCH }\n\t\t\t\t),\n\t\t\tfilterAll: true\n\t\t},\n\t\t{\n\t\t\tHeader: 'Number of Tx',\n\t\t\taccessor: 'txcount',\n\t\t\tfilterMethod: (filter, rows) =>\n\t\t\t\tmatchSorter(\n\t\t\t\t\trows,\n\t\t\t\t\tfilter.value,\n\t\t\t\t\t{ keys: ['txcount'] },\n\t\t\t\t\t{ threshold: matchSorter.rankings.SIMPLEMATCH }\n\t\t\t\t),\n\t\t\tfilterAll: true,\n\t\t\twidth: 150\n\t\t},\n\t\t{\n\t\t\tHeader: 'Data Hash',\n\t\t\taccessor: 'datahash',\n\t\t\tclassName: classes.hash,\n\t\t\tCell: row => (\n\t\t\t\t<span>\n\t\t\t\t\t<ul className={classes.partialHash} href=\"#/blocks\">\n\t\t\t\t\t\t<div className={classes.fullHash} id=\"showTransactionId\">\n\t\t\t\t\t\t\t{row.value}\n\t\t\t\t\t\t</div>{' '}\n\n\t\t\t\t\t\t{/* {row.value.slice(0, 6)} {!row.value ? '' : '... '} */}\n\t\t\t\t\t</ul>{' '}\n\t\t\t\t</span>\n\t\t\t),\n\t\t\tfilterMethod: (filter, rows) =>\n\t\t\t\tmatchSorter(\n\t\t\t\t\trows,\n\t\t\t\t\tfilter.value,\n\t\t\t\t\t{ keys: ['datahash'] },\n\t\t\t\t\t{ threshold: matchSorter.rankings.SIMPLEMATCH }\n\t\t\t\t),\n\t\t\tfilterAll: true\n\t\t},\n\t\t{\n\t\t\tHeader: 'Block Hash',\n\t\t\taccessor: 'blockhash',\n\t\t\tclassName: classes.hash,\n\t\t\tCell: row => (\n\t\t\t\t<span>\n\t\t\t\t\t<a\n\t\t\t\t\t\tdata-command=\"block-partial-hash\"\n\t\t\t\t\t\tclassName={classes.partialHash}\n\t\t\t\t\t\tonClick={() => this.handleDialogOpenBlockHash(row.value)}\n\t\t\t\t\t\thref=\"#/blocks\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classes.fullHash} id=\"showTransactionId\">\n\t\t\t\t\t\t\t{row.value}\n\t\t\t\t\t\t</div>{' '}\n\t\t\t\t\t\t{/* {row.value.slice(0, 6)} {!row.value ? '' : '... '} */}\n\t\t\t\t\t</a>{' '}\n\t\t\t\t</span>\n\t\t\t),\n\t\t\tfilterMethod: (filter, rows) =>\n\t\t\t\tmatchSorter(\n\t\t\t\t\trows,\n\t\t\t\t\tfilter.value,\n\t\t\t\t\t{ keys: ['blockhash'] },\n\t\t\t\t\t{ threshold: matchSorter.rankings.SIMPLEMATCH }\n\t\t\t\t),\n\t\t\tfilterAll: true\n\t\t},\n\t\t{\n\t\t\tHeader: 'Previous Hash',\n\t\t\taccessor: 'prehash',\n\t\t\tclassName: classes.hash,\n\t\t\tCell: row => (\n\t\t\t\t<span>\n\t\t\t\t\t<ul\n\t\t\t\t\t\tclassName={classes.partialHash}\n\t\t\t\t\t\tonClick={() => this.handleDialogOpenBlockHash(row.value)}\n\t\t\t\t\t\thref=\"#/blocks\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<div className={classes.fullHash} id=\"showTransactionId\">\n\t\t\t\t\t\t\t{row.value}\n\t\t\t\t\t\t</div>{' '}\n\t\t\t\t\t\t{/* {row.value.slice(0, 6)} {!row.value ? '' : '... '} */}\n\t\t\t\t\t</ul>{' '}\n\t\t\t\t</span>\n\t\t\t),\n\t\t\tfilterMethod: (filter, rows) =>\n\t\t\t\tmatchSorter(\n\t\t\t\t\trows,\n\t\t\t\t\tfilter.value,\n\t\t\t\t\t{ keys: ['prehash'] },\n\t\t\t\t\t{ threshold: matchSorter.rankings.SIMPLEMATCH }\n\t\t\t\t),\n\t\t\tfilterAll: true,\n\t\t\twidth: 150\n\t\t},\n\t\t{\n\t\t\tHeader: 'Transactions',\n\t\t\taccessor: 'txhash',\n\t\t\tclassName: classes.hash,\n\t\t\tCell: row => (\n\t\t\t\t<ul>\n\t\t\t\t\t{/* {!isNull(row.value)\n\t\t\t\t\t\t? row.value.map(tid => (\n\t\t\t\t\t\t\t<li\n\t\t\t\t\t\t\t\tkey={tid}\n\t\t\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\t\t\toverflow: 'hidden',\n\t\t\t\t\t\t\t\t\twhiteSpace: 'nowrap',\n\t\t\t\t\t\t\t\t\ttextOverflow: 'ellipsis'\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<a\n\t\t\t\t\t\t\t\t\tclassName={classes.partialHash}\n\t\t\t\t\t\t\t\t\tonClick={() => this.handleDialogOpen(tid)}\n\t\t\t\t\t\t\t\t\thref=\"#/blocks\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<div className={classes.lastFullHash} id=\"showTransactionId\">\n\t\t\t\t\t\t\t\t\t\t{tid}\n\t\t\t\t\t\t\t\t\t</div>{' '}\n\t\t\t\t\t\t\t\t\t{tid.slice(0, 6)} {!tid ? '' : '... '}\n\t\t\t\t\t\t\t\t</a>\n\t\t\t\t\t\t\t</li>\n\t\t\t\t\t\t))\n\t\t\t\t\t\t: 'null'} */}\n\t\t\t\t</ul>\n\t\t\t),\n\t\t\tfilterMethod: (filter, rows) =>\n\t\t\t\tmatchSorter(\n\t\t\t\t\trows,\n\t\t\t\t\tfilter.value,\n\t\t\t\t\t{ keys: ['txhash'] },\n\t\t\t\t\t{ threshold: matchSorter.rankings.SIMPLEMATCH }\n\t\t\t\t),\n\t\t\tfilterAll: true\n\t\t},\n\t\t{\n\t\t\tHeader: 'Size(KB)',\n\t\t\taccessor: 'blksize',\n\t\t\tfilterMethod: (filter, rows) =>\n\t\t\t\tmatchSorter(\n\t\t\t\t\trows,\n\t\t\t\t\tfilter.value,\n\t\t\t\t\t{ keys: ['blksize'] },\n\t\t\t\t\t{ threshold: matchSorter.rankings.SIMPLEMATCH }\n\t\t\t\t),\n\t\t\tfilterAll: true,\n\t\t\twidth: 150\n\t\t}\n\t];\n\n\trender() {\n\t\tconst blockList = this.state.search\n\t\t\t? this.props.blockListSearch\n\t\t\t: this.props.blockList;\n\n\t\tconsole.log(\"binhnt: componenets.Lists.Blocks: blockList = \", blockList)\n\n\n\t\tconst { transaction, classes } = this.props;\n\t\tconst { blockHash, dialogOpen, dialogOpenBlockHash } = this.state;\n\t\treturn (\n\t\t\t<div>\n\t\t\t\t<div className={`${classes.filter} row searchRow`}>\n\t\t\t\t\t<div className={`${classes.filterElement} col-md-3`}>\n\t\t\t\t\t\t<label className=\"label\">From</label>\n\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\tid=\"from\"\n\t\t\t\t\t\t\tselected={this.state.from}\n\t\t\t\t\t\t\tshowTimeSelect\n\t\t\t\t\t\t\ttimeIntervals={5}\n\t\t\t\t\t\t\tdateFormat=\"LLL\"\n\t\t\t\t\t\t\tonChange={date => {\n\t\t\t\t\t\t\t\tif (date > this.state.to) {\n\t\t\t\t\t\t\t\t\tthis.setState({ err: true, from: date });\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.setState({ from: date, err: false });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className={`${classes.filterElement} col-md-3`}>\n\t\t\t\t\t\t<label className=\"label\">To</label>\n\t\t\t\t\t\t<DatePicker\n\t\t\t\t\t\t\tid=\"to\"\n\t\t\t\t\t\t\tselected={this.state.to}\n\t\t\t\t\t\t\tshowTimeSelect\n\t\t\t\t\t\t\ttimeIntervals={5}\n\t\t\t\t\t\t\tdateFormat=\"LLL\"\n\t\t\t\t\t\t\tonChange={date => {\n\t\t\t\t\t\t\t\tif (date > this.state.from) {\n\t\t\t\t\t\t\t\t\tthis.setState({ to: date, err: false });\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tthis.setState({ err: true, to: date });\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t<div className=\"validator \">\n\t\t\t\t\t\t\t\t{this.state.err && (\n\t\t\t\t\t\t\t\t\t<span className=\" label border-red\">\n\t\t\t\t\t\t\t\t\t\t{' '}\n\t\t\t\t\t\t\t\t\t\tFrom date should be less than To date\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</DatePicker>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-md-2\">\n\t\t\t\t\t\t<MultiSelect\n\t\t\t\t\t\t\thasSelectAll\n\t\t\t\t\t\t\tvalueRenderer={this.handleCustomRender}\n\t\t\t\t\t\t\tshouldToggleOnHover={false}\n\t\t\t\t\t\t\tselected={this.state.orgs}\n\t\t\t\t\t\t\toptions={this.state.options}\n\t\t\t\t\t\t\tselectAllLabel=\"All Orgs\"\n\t\t\t\t\t\t\tonSelectedChanged={value => {\n\t\t\t\t\t\t\t\tthis.handleMultiSelect(value);\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-md-2\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={classes.searchButton}\n\t\t\t\t\t\t\tcolor=\"success\"\n\t\t\t\t\t\t\tdisabled={this.state.err}\n\t\t\t\t\t\t\tonClick={async () => {\n\t\t\t\t\t\t\t\tawait this.handleSearch();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tSearch\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-md-1\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={classes.filterButton}\n\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\t\t\tthis.handleClearSearch();\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tReset\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t\t<div className=\"col-md-1\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tclassName={classes.filterButton}\n\t\t\t\t\t\t\tcolor=\"secondary\"\n\t\t\t\t\t\t\tonClick={() => this.setState({ filtered: [], sorted: [] })}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tClear Filter\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t\t<ReactTable\n\t\t\t\t\tdata={blockList}\n\t\t\t\t\tcolumns={this.reactTableSetup(classes)}\n\t\t\t\t\tdefaultPageSize={10}\n\t\t\t\t\tlist\n\t\t\t\t\tfilterable\n\t\t\t\t\tsorted={this.state.sorted}\n\t\t\t\t\tonSortedChange={sorted => {\n\t\t\t\t\t\tthis.setState({ sorted });\n\t\t\t\t\t}}\n\t\t\t\t\tfiltered={this.state.filtered}\n\t\t\t\t\tonFilteredChange={filtered => {\n\t\t\t\t\t\tthis.setState({ filtered });\n\t\t\t\t\t}}\n\t\t\t\t\tminRows={0}\n\t\t\t\t\tstyle={{ height: '750px' }}\n\t\t\t\t\tshowPagination={blockList.length >= 5}\n\t\t\t\t/>\n\n\t\t\t\t<Dialog\n\t\t\t\t\topen={dialogOpen}\n\t\t\t\t\tonClose={this.handleDialogClose}\n\t\t\t\t\tfullWidth\n\t\t\t\t\tmaxWidth=\"md\"\n\t\t\t\t>\n\t\t\t\t\t<TransactionView\n\t\t\t\t\t\ttransaction={transaction}\n\t\t\t\t\t\tonClose={this.handleDialogClose}\n\t\t\t\t\t/>\n\t\t\t\t</Dialog>\n\n\t\t\t\t<Dialog\n\t\t\t\t\topen={dialogOpenBlockHash}\n\t\t\t\t\tonClose={this.handleDialogCloseBlockHash}\n\t\t\t\t\tfullWidth\n\t\t\t\t\tmaxWidth=\"md\"\n\t\t\t\t>\n\t\t\t\t\t<BlockView\n\t\t\t\t\t\tblockHash={blockHash}\n\t\t\t\t\t\tonClose={this.handleDialogCloseBlockHash}\n\t\t\t\t\t/>\n\t\t\t\t</Dialog>\n\t\t\t</div>\n\t\t);\n\t}\n}\n\nBlocks.propTypes = {\n\tblockList: blockListType.isRequired,\n\tcurrentChannel: currentChannelType.isRequired,\n\tgetTransaction: getTransactionType.isRequired,\n\ttransaction: transactionType\n};\n\nBlocks.defaultProps = {\n\ttransaction: null\n};\n\nexport default withStyles(styles)(Blocks);\n"]},"metadata":{},"sourceType":"module"}