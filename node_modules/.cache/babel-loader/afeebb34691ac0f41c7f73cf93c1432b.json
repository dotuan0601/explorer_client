{"ast":null,"code":"import _regeneratorRuntime from\"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _defineProperty from\"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _classCallCheck from\"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/teko/work/new_explorer/client/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import compose from'recompose/compose';import{connect}from'react-redux';import{withStyles}from'@material-ui/core/styles';import Button from'@material-ui/core/Button';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';import FormHelperText from'@material-ui/core/FormHelperText';import Paper from'@material-ui/core/Paper';import MuiDialogTitle from'@material-ui/core/DialogTitle';import CloseIcon from'@material-ui/icons/Close';import IconButton from'@material-ui/core/IconButton';import List from'@material-ui/core/List';import ListItem from'@material-ui/core/ListItem';import ListItemText from'@material-ui/core/ListItemText';import ListItemAvatar from'@material-ui/core/ListItemAvatar';import SupervisorAccountIcon from'@material-ui/icons/SupervisorAccount';import PersonIcon from'@material-ui/icons/Person';import RemoveIcon from'@material-ui/icons/Remove';import Avatar from'@material-ui/core/Avatar';import{authSelectors,authOperations}from'../../state/redux/auth';import{userListType,getUserListType}from'../../consts/types';import Container from'../Container';var styles=function styles(theme){var type=theme.palette.type;var dark=type==='dark';return{paper:{display:'flex',flexDirection:'column',alignItems:'center',padding:\"\".concat(theme.spacing.unit*2,\"px \").concat(theme.spacing.unit*3,\"px \").concat(theme.spacing.unit*3,\"px\")},root:{width:'100%',maxWidth:360,backgroundColor:theme.palette.background.paper},closeButton:{position:'absolute',right:theme.spacing.unit,top:theme.spacing.unit,color:theme.palette.grey[500]},adminIcon:{color:dark?'#1f1a33':'#004d6b',backgroundColor:dark?'#6a9cf8':'#b9d6e1'},userIcon:{color:dark?'#79536d':'#407b20',backgroundColor:dark?'#f7cdea':'#d0ecda'},deleteButton:{color:'#e33e19'}};};var userlist=authOperations.userlist,unregister=authOperations.unregister;var userlistSelector=authSelectors.userlistSelector,unregisteredSelector=authSelectors.unregisteredSelector;export var Users=/*#__PURE__*/function(_Component){_inherits(Users,_Component);var _super=_createSuper(Users);function Users(props){var _this;_classCallCheck(this,Users);_this=_super.call(this,props);_this.handleChange=function(event){var target=event.target;var value=target.type==='checkbox'?target.checked:target.value;var name=target.name;_this.setState(_defineProperty({},name,{value:value}));};_this.deletePrompt=function(username){_this.setState({prompt:true});_this.setState({selectedUser:username});};var registered=props.registered,userlists=props.userlists;_this.state={rolesList:['admin','user'],error:'',registered:registered,isLoading:false,allValid:false,prompt:false,selectedUser:'',userlists:userlists,info:{status:'',message:''}};return _this;}_createClass(Users,[{key:\"componentWillReceiveProps\",value:function componentWillReceiveProps(nextProps){var _nextProps$registered=nextProps.registered,registered=_nextProps$registered===void 0?[]:_nextProps$registered,error=nextProps.error,userlists=nextProps.userlists;this.setState(function(){return{registered:registered,error:error,userlists:userlists};});}},{key:\"reloadUsers\",value:function(){var _reloadUsers=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var _this2=this;var userlists,index,newUsers;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:userlists=this.props.userlists;index=userlists.findIndex(function(x){return x.username===_this2.state.selectedUser;});newUsers=userlists;newUsers.splice(index,1);this.setState({userlists:newUsers});case 5:case\"end\":return _context.stop();}}},_callee,this);}));function reloadUsers(){return _reloadUsers.apply(this,arguments);}return reloadUsers;}()},{key:\"removeUser\",value:function(){var _removeUser=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){var _this3=this;var unregisterUser;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:unregisterUser=this.props.unregister;_context2.next=3;return Promise.all([unregisterUser({user:this.state.selectedUser})]).then(function(message){if(message[0].status==='success'){_this3.reloadUsers();}else{_this3.setState({info:message[0]});}});case 3:case\"end\":return _context2.stop();}}},_callee2,this);}));function removeUser(){return _removeUser.apply(this,arguments);}return removeUser;}()},{key:\"render\",value:function render(){var _this4=this;var _this$props=this.props,classes=_this$props.classes,onClose=_this$props.onClose;/* const [open, setOpen] = React.useState(false);\n\t\t */var info=this.state.info;var handleClose=function handleClose(){_this4.setState({prompt:false,info:{status:'',message:''}});};var handleDelete=function handleDelete(){_this4.setState({info:{status:'',message:''}});_this4.removeUser();_this4.setState({selectedUser:''});handleClose();};return/*#__PURE__*/React.createElement(Container,null,/*#__PURE__*/React.createElement(Paper,{className:classes.paper},/*#__PURE__*/React.createElement(MuiDialogTitle,null,onClose?/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"Close\",className:classes.closeButton,onClick:onClose},/*#__PURE__*/React.createElement(CloseIcon,null)):null),/*#__PURE__*/React.createElement(List,{className:classes.root},this.state.userlists.map(function(user){return/*#__PURE__*/React.createElement(ListItem,{key:user.username},user.roles==='admin'?/*#__PURE__*/React.createElement(ListItemAvatar,{className:classes.adminIcon},/*#__PURE__*/React.createElement(Avatar,null,/*#__PURE__*/React.createElement(SupervisorAccountIcon,null))):/*#__PURE__*/React.createElement(ListItemAvatar,{className:classes.userIcon},/*#__PURE__*/React.createElement(Avatar,null,/*#__PURE__*/React.createElement(PersonIcon,null))),user.firstName?/*#__PURE__*/React.createElement(ListItemText,{primary:user.firstName+' '+user.lastName,secondary:user.username}):/*#__PURE__*/React.createElement(ListItemText,{primary:\"No Name Listed\",secondary:user.username}),/*#__PURE__*/React.createElement(IconButton,{className:classes.deleteButton,color:\"primary\",\"aria-label\":\"upload picture\",component:\"span\"},/*#__PURE__*/React.createElement(RemoveIcon,{onClick:function onClick(){return _this4.deletePrompt(user.username);}})));})),info.status!=='success'&&/*#__PURE__*/React.createElement(FormHelperText,{id:\"component-error-text\",error:true},info.message),/*#__PURE__*/React.createElement(Dialog,{open:this.state.prompt,keepMounted:true,onClose:handleClose,\"aria-labelledby\":\"alert-dialog-slide-title\",\"aria-describedby\":\"alert-dialog-slide-description\"},/*#__PURE__*/React.createElement(DialogTitle,{id:\"alert-dialog-slide-title\"},'Delete a user?'),/*#__PURE__*/React.createElement(DialogContent,null,/*#__PURE__*/React.createElement(DialogContentText,{id:\"alert-dialog-slide-description\"},\"Are you sure you want to remove this user?\")),/*#__PURE__*/React.createElement(DialogActions,null,/*#__PURE__*/React.createElement(Button,{onClick:handleClose,color:\"primary\"},\"Cancel\"),/*#__PURE__*/React.createElement(Button,{onClick:handleDelete,color:\"primary\"},\"Delete\")))));}}]);return Users;}(Component);var errorSelector=authSelectors.errorSelector;export default compose(withStyles(styles),connect(function(state){return{error:errorSelector(state),userlists:userlistSelector(state),unregistered:unregisteredSelector(state)};},{userlist:userlist,unregister:unregister}))(Users);","map":{"version":3,"sources":["/home/teko/work/new_explorer/client/src/components/Lists/Users.js"],"names":["React","Component","compose","connect","withStyles","Button","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","FormHelperText","Paper","MuiDialogTitle","CloseIcon","IconButton","List","ListItem","ListItemText","ListItemAvatar","SupervisorAccountIcon","PersonIcon","RemoveIcon","Avatar","authSelectors","authOperations","userListType","getUserListType","Container","styles","theme","type","palette","dark","paper","display","flexDirection","alignItems","padding","spacing","unit","root","width","maxWidth","backgroundColor","background","closeButton","position","right","top","color","grey","adminIcon","userIcon","deleteButton","userlist","unregister","userlistSelector","unregisteredSelector","Users","props","handleChange","event","target","value","checked","name","setState","deletePrompt","username","prompt","selectedUser","registered","userlists","state","rolesList","error","isLoading","allValid","info","status","message","nextProps","index","findIndex","x","newUsers","splice","unregisterUser","Promise","all","user","then","reloadUsers","classes","onClose","handleClose","handleDelete","removeUser","map","roles","firstName","lastName","errorSelector","unregistered"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\n\nimport compose from 'recompose/compose';\nimport { connect } from 'react-redux';\n\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormHelperText from '@material-ui/core/FormHelperText';\nimport Paper from '@material-ui/core/Paper';\nimport MuiDialogTitle from '@material-ui/core/DialogTitle';\nimport CloseIcon from '@material-ui/icons/Close';\nimport IconButton from '@material-ui/core/IconButton';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar';\nimport SupervisorAccountIcon from '@material-ui/icons/SupervisorAccount';\nimport PersonIcon from '@material-ui/icons/Person';\nimport RemoveIcon from '@material-ui/icons/Remove';\nimport Avatar from '@material-ui/core/Avatar';\nimport { shape, string } from 'prop-types';\nimport { authSelectors, authOperations } from '../../state/redux/auth';\nimport { userListType, getUserListType } from '../../consts/types';\nimport Container from '../Container';\n\nconst styles = theme => {\n\tconst { type } = theme.palette;\n\tconst dark = type === 'dark';\n\treturn {\n\t\tpaper: {\n\t\t\tdisplay: 'flex',\n\t\t\tflexDirection: 'column',\n\t\t\talignItems: 'center',\n\t\t\tpadding: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme\n\t\t\t\t.spacing.unit * 3}px`\n\t\t},\n\t\troot: {\n\t\t\twidth: '100%',\n\t\t\tmaxWidth: 360,\n\t\t\tbackgroundColor: theme.palette.background.paper\n\t\t},\n\t\tcloseButton: {\n\t\t\tposition: 'absolute',\n\t\t\tright: theme.spacing.unit,\n\t\t\ttop: theme.spacing.unit,\n\t\t\tcolor: theme.palette.grey[500]\n\t\t},\n\t\tadminIcon: {\n\t\t\tcolor: dark ? '#1f1a33' : '#004d6b',\n\t\t\tbackgroundColor: dark ? '#6a9cf8' : '#b9d6e1'\n\t\t},\n\t\tuserIcon: {\n\t\t\tcolor: dark ? '#79536d' : '#407b20',\n\t\t\tbackgroundColor: dark ? '#f7cdea' : '#d0ecda'\n\t\t},\n\t\tdeleteButton: {\n\t\t\tcolor: '#e33e19'\n\t\t}\n\t};\n};\nconst { userlist, unregister } = authOperations;\n\nconst { userlistSelector, unregisteredSelector } = authSelectors;\n\nexport class Users extends Component {\n\tstatic propTypes = {\n\t\tclasses: shape({\n\t\t\tcontainer: string,\n\t\t\tpaper: string\n\t\t}).isRequired\n\t};\n\n\tconstructor(props) {\n\t\tsuper(props);\n\t\tconst { registered, userlists } = props;\n\t\tthis.state = {\n\t\t\trolesList: ['admin', 'user'],\n\t\t\terror: '',\n\t\t\tregistered,\n\t\t\tisLoading: false,\n\t\t\tallValid: false,\n\t\t\tprompt: false,\n\t\t\tselectedUser: '',\n\t\t\tuserlists: userlists,\n\t\t\tinfo: {\n\t\t\t\tstatus: '',\n\t\t\t\tmessage: ''\n\t\t\t}\n\t\t};\n\t}\n\n\tcomponentWillReceiveProps(nextProps) {\n\t\tconst { registered = [], error, userlists } = nextProps;\n\t\tthis.setState(() => ({\n\t\t\tregistered,\n\t\t\terror,\n\t\t\tuserlists\n\t\t}));\n\t}\n\n\thandleChange = event => {\n\t\tconst { target } = event;\n\t\tconst value = target.type === 'checkbox' ? target.checked : target.value;\n\t\tconst { name } = target;\n\t\tthis.setState({\n\t\t\t[name]: { value }\n\t\t});\n\t};\n\tdeletePrompt = username => {\n\t\tthis.setState({ prompt: true });\n\t\tthis.setState({ selectedUser: username });\n\t};\n\tasync reloadUsers() {\n\t\tconst { userlists } = this.props;\n\t\tvar index = userlists.findIndex(x => x.username === this.state.selectedUser);\n\t\tvar newUsers = userlists;\n\t\tnewUsers.splice(index, 1);\n\t\tthis.setState({ userlists: newUsers });\n\t}\n\tasync removeUser() {\n\t\tconst { unregister: unregisterUser } = this.props;\n\t\tawait Promise.all([unregisterUser({ user: this.state.selectedUser })]).then(\n\t\t\tmessage => {\n\t\t\t\tif (message[0].status === 'success') {\n\t\t\t\t\tthis.reloadUsers();\n\t\t\t\t} else {\n\t\t\t\t\tthis.setState({ info: message[0] });\n\t\t\t\t}\n\t\t\t}\n\t\t);\n\t}\n\trender() {\n\t\tconst { classes, onClose } = this.props;\n\t\t/* const [open, setOpen] = React.useState(false);\n\t\t */\n\t\tconst { info } = this.state;\n\t\tconst handleClose = () => {\n\t\t\tthis.setState({\n\t\t\t\tprompt: false,\n\t\t\t\tinfo: {\n\t\t\t\t\tstatus: '',\n\t\t\t\t\tmessage: ''\n\t\t\t\t}\n\t\t\t});\n\t\t};\n\t\tconst handleDelete = () => {\n\t\t\tthis.setState({ info: { status: '', message: '' } });\n\t\t\tthis.removeUser();\n\t\t\tthis.setState({ selectedUser: '' });\n\n\t\t\thandleClose();\n\t\t};\n\t\treturn (\n\t\t\t<Container>\n\t\t\t\t<Paper className={classes.paper}>\n\t\t\t\t\t{/* <Typography className={classes.title} component=\"h5\" variant=\"headline\">\n\t\t\t\t\t\tUser List\n\t\t\t\t\t</Typography> */}\n\t\t\t\t\t<MuiDialogTitle>\n\t\t\t\t\t\t{onClose ? (\n\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\taria-label=\"Close\"\n\t\t\t\t\t\t\t\tclassName={classes.closeButton}\n\t\t\t\t\t\t\t\tonClick={onClose}\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<CloseIcon />\n\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t) : null}\n\t\t\t\t\t</MuiDialogTitle>\n\t\t\t\t\t<List className={classes.root}>\n\t\t\t\t\t\t{this.state.userlists.map(user => (\n\t\t\t\t\t\t\t<ListItem key={user.username}>\n\t\t\t\t\t\t\t\t{user.roles === 'admin' ? (\n\t\t\t\t\t\t\t\t\t<ListItemAvatar className={classes.adminIcon}>\n\t\t\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t\t\t<SupervisorAccountIcon />\n\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ListItemAvatar className={classes.userIcon}>\n\t\t\t\t\t\t\t\t\t\t<Avatar>\n\t\t\t\t\t\t\t\t\t\t\t<PersonIcon />\n\t\t\t\t\t\t\t\t\t\t</Avatar>\n\t\t\t\t\t\t\t\t\t</ListItemAvatar>\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t{user.firstName ? (\n\t\t\t\t\t\t\t\t\t<ListItemText\n\t\t\t\t\t\t\t\t\t\tprimary={user.firstName + ' ' + user.lastName}\n\t\t\t\t\t\t\t\t\t\tsecondary={user.username}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t<ListItemText primary=\"No Name Listed\" secondary={user.username} />\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t<IconButton\n\t\t\t\t\t\t\t\t\tclassName={classes.deleteButton}\n\t\t\t\t\t\t\t\t\tcolor=\"primary\"\n\t\t\t\t\t\t\t\t\taria-label=\"upload picture\"\n\t\t\t\t\t\t\t\t\tcomponent=\"span\"\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t<RemoveIcon onClick={() => this.deletePrompt(user.username)} />\n\t\t\t\t\t\t\t\t</IconButton>\n\t\t\t\t\t\t\t</ListItem>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</List>\n\t\t\t\t\t{info.status !== 'success' && (\n\t\t\t\t\t\t<FormHelperText id=\"component-error-text\" error>\n\t\t\t\t\t\t\t{info.message}\n\t\t\t\t\t\t</FormHelperText>\n\t\t\t\t\t)}\n\t\t\t\t\t<Dialog\n\t\t\t\t\t\topen={this.state.prompt}\n\t\t\t\t\t\tkeepMounted\n\t\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\t\taria-labelledby=\"alert-dialog-slide-title\"\n\t\t\t\t\t\taria-describedby=\"alert-dialog-slide-description\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<DialogTitle id=\"alert-dialog-slide-title\">\n\t\t\t\t\t\t\t{'Delete a user?'}\n\t\t\t\t\t\t</DialogTitle>\n\t\t\t\t\t\t<DialogContent>\n\t\t\t\t\t\t\t<DialogContentText id=\"alert-dialog-slide-description\">\n\t\t\t\t\t\t\t\tAre you sure you want to remove this user?\n\t\t\t\t\t\t\t</DialogContentText>\n\t\t\t\t\t\t</DialogContent>\n\t\t\t\t\t\t<DialogActions>\n\t\t\t\t\t\t\t<Button onClick={handleClose} color=\"primary\">\n\t\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t<Button onClick={handleDelete} color=\"primary\">\n\t\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t</DialogActions>\n\t\t\t\t\t</Dialog>\n\t\t\t\t</Paper>\n\t\t\t</Container>\n\t\t);\n\t}\n}\n\nconst { errorSelector } = authSelectors;\nUsers.propTypes = {\n\tuserlists: userListType.isRequired,\n\tuserlist: getUserListType.isRequired\n};\nexport default compose(\n\twithStyles(styles),\n\tconnect(\n\t\tstate => ({\n\t\t\terror: errorSelector(state),\n\t\t\tuserlists: userlistSelector(state),\n\t\t\tunregistered: unregisteredSelector(state)\n\t\t}),\n\t\t{\n\t\t\tuserlist: userlist,\n\t\t\tunregister: unregister\n\t\t}\n\t)\n)(Users);\n"]},"metadata":{},"sourceType":"module"}