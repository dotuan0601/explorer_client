{"ast":null,"code":"/**\r\n *    SPDX-License-Identifier: Apache-2.0\r\n */import agent from'superagent';import Auth from'../state/Auth';export var post=function post(uri,payload){return new Promise(function(resolve,reject){agent.post(uri).send(payload).set('Accept','application/json').set('Authorization',\"bearer \".concat(Auth.getToken())).end(withPromiseCallback(resolve,reject));});};export var get=function get(uri){return new Promise(function(resolve,reject){agent.get(uri).set('Accept','application/json').set('Authorization',\"bearer \".concat(Auth.getToken())).set('Cache-Control','no-cache').end(withPromiseCallback(resolve,reject));});};export var put=function put(uri,payload){return new Promise(function(resolve,reject){agent.put(uri).send(payload).set('Accept','application/json').set('Authorization',\"bearer \".concat(Auth.getToken())).end(withPromiseCallback(resolve,reject));});};export var deleteRequest=function deleteRequest(uri,payload){return new Promise(function(resolve,reject){agent.delete(uri).send(payload).set('Accept','application/json').set('Authorization',\"bearer \".concat(Auth.getToken())).end(withPromiseCallback(resolve,reject));});};export var withPromiseCallback=function withPromiseCallback(resolve,reject){return function(error,response){if(error){console.error(error);if(response&&response.status===401){Auth.deauthenticateUser();}reject({error:error});}else{resolve(response.body);}};};","map":{"version":3,"sources":["/home/teko/work/new_explorer/client/src/services/request.js"],"names":["agent","Auth","post","uri","payload","Promise","resolve","reject","send","set","getToken","end","withPromiseCallback","get","put","deleteRequest","delete","error","response","console","status","deauthenticateUser","body"],"mappings":"AAAA;AACA;AACA,GAEA,MAAOA,CAAAA,KAAP,KAAkB,YAAlB,CAEA,MAAOC,CAAAA,IAAP,KAAiB,eAAjB,CAEA,MAAO,IAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,CAACC,GAAD,CAAMC,OAAN,QACnB,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CAChCP,KAAK,CACHE,IADF,CACOC,GADP,EAEEK,IAFF,CAEOJ,OAFP,EAGEK,GAHF,CAGM,QAHN,CAGgB,kBAHhB,EAIEA,GAJF,CAIM,eAJN,kBAIiCR,IAAI,CAACS,QAAL,EAJjC,GAKEC,GALF,CAKMC,mBAAmB,CAACN,OAAD,CAAUC,MAAV,CALzB,EAMA,CAPD,CADmB,EAAb,CASP,MAAO,IAAMM,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,CAAAV,GAAG,QACrB,IAAIE,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CAChCP,KAAK,CACHa,GADF,CACMV,GADN,EAEEM,GAFF,CAEM,QAFN,CAEgB,kBAFhB,EAGEA,GAHF,CAGM,eAHN,kBAGiCR,IAAI,CAACS,QAAL,EAHjC,GAIED,GAJF,CAIM,eAJN,CAIuB,UAJvB,EAKEE,GALF,CAKMC,mBAAmB,CAACN,OAAD,CAAUC,MAAV,CALzB,EAMA,CAPD,CADqB,EAAf,CASP,MAAO,IAAMO,CAAAA,GAAG,CAAG,QAANA,CAAAA,GAAM,CAACX,GAAD,CAAMC,OAAN,QAClB,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CAChCP,KAAK,CACHc,GADF,CACMX,GADN,EAEEK,IAFF,CAEOJ,OAFP,EAGEK,GAHF,CAGM,QAHN,CAGgB,kBAHhB,EAIEA,GAJF,CAIM,eAJN,kBAIiCR,IAAI,CAACS,QAAL,EAJjC,GAKEC,GALF,CAKMC,mBAAmB,CAACN,OAAD,CAAUC,MAAV,CALzB,EAMA,CAPD,CADkB,EAAZ,CASP,MAAO,IAAMQ,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACZ,GAAD,CAAMC,OAAN,QAC5B,IAAIC,CAAAA,OAAJ,CAAY,SAACC,OAAD,CAAUC,MAAV,CAAqB,CAChCP,KAAK,CACHgB,MADF,CACSb,GADT,EAEEK,IAFF,CAEOJ,OAFP,EAGEK,GAHF,CAGM,QAHN,CAGgB,kBAHhB,EAIEA,GAJF,CAIM,eAJN,kBAIiCR,IAAI,CAACS,QAAL,EAJjC,GAKEC,GALF,CAKMC,mBAAmB,CAACN,OAAD,CAAUC,MAAV,CALzB,EAMA,CAPD,CAD4B,EAAtB,CASP,MAAO,IAAMK,CAAAA,mBAAmB,CAAG,QAAtBA,CAAAA,mBAAsB,CAACN,OAAD,CAAUC,MAAV,QAAqB,UAACU,KAAD,CAAQC,QAAR,CAAqB,CAC5E,GAAID,KAAJ,CAAW,CACVE,OAAO,CAACF,KAAR,CAAcA,KAAd,EACA,GAAIC,QAAQ,EAAIA,QAAQ,CAACE,MAAT,GAAoB,GAApC,CAAyC,CACxCnB,IAAI,CAACoB,kBAAL,GACA,CACDd,MAAM,CAAC,CAAEU,KAAK,CAALA,KAAF,CAAD,CAAN,CACA,CAND,IAMO,CACNX,OAAO,CAACY,QAAQ,CAACI,IAAV,CAAP,CACA,CACD,CAVkC,EAA5B","sourcesContent":["/**\r\n *    SPDX-License-Identifier: Apache-2.0\r\n */\r\n\r\nimport agent from 'superagent';\r\n\r\nimport Auth from '../state/Auth';\r\n\r\nexport const post = (uri, payload) =>\r\n\tnew Promise((resolve, reject) => {\r\n\t\tagent\r\n\t\t\t.post(uri)\r\n\t\t\t.send(payload)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.set('Authorization', `bearer ${Auth.getToken()}`)\r\n\t\t\t.end(withPromiseCallback(resolve, reject));\r\n\t});\r\nexport const get = uri =>\r\n\tnew Promise((resolve, reject) => {\r\n\t\tagent\r\n\t\t\t.get(uri)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.set('Authorization', `bearer ${Auth.getToken()}`)\r\n\t\t\t.set('Cache-Control', 'no-cache')\r\n\t\t\t.end(withPromiseCallback(resolve, reject));\r\n\t});\r\nexport const put = (uri, payload) =>\r\n\tnew Promise((resolve, reject) => {\r\n\t\tagent\r\n\t\t\t.put(uri)\r\n\t\t\t.send(payload)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.set('Authorization', `bearer ${Auth.getToken()}`)\r\n\t\t\t.end(withPromiseCallback(resolve, reject));\r\n\t});\r\nexport const deleteRequest = (uri, payload) =>\r\n\tnew Promise((resolve, reject) => {\r\n\t\tagent\r\n\t\t\t.delete(uri)\r\n\t\t\t.send(payload)\r\n\t\t\t.set('Accept', 'application/json')\r\n\t\t\t.set('Authorization', `bearer ${Auth.getToken()}`)\r\n\t\t\t.end(withPromiseCallback(resolve, reject));\r\n\t});\r\nexport const withPromiseCallback = (resolve, reject) => (error, response) => {\r\n\tif (error) {\r\n\t\tconsole.error(error);\r\n\t\tif (response && response.status === 401) {\r\n\t\t\tAuth.deauthenticateUser();\r\n\t\t}\r\n\t\treject({ error });\r\n\t} else {\r\n\t\tresolve(response.body);\r\n\t}\r\n};\r\n"]},"metadata":{},"sourceType":"module"}